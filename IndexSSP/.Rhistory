source('C:/Shahar/Projects/Discrepancy/R/session7.R')
j <- predictionSpreadsheet(rawDF, extDisc, extDisc)
source('C:/Shahar/Projects/Discrepancy/R/session7.R')
j <- predictionSpreadsheet(rawDF, extDisc, extDisc)
inner_join(placementSample %>% select(placementId)).
inner_join(placementSample %>% select(placementId))
period2 %>% inner_join(placementSample %>% select(placementId))
!identical(externalDiscrepancyData,NA)
"placementId" %in% names(externalDiscrepancyData)
pred %>% left_join(externalDiscrepancyData, by=placementId)
pred %>% left_join(externalDiscrepancyData, by="placementId")
debugSource('C:/Shahar/Projects/Discrepancy/R/session7.R')
j <- predictionSpreadsheet(rawDF, extDisc, extDisc)
View(j)
debugSource('C:/Shahar/Projects/Discrepancy/R/session7.R')
source('C:/Shahar/Projects/Discrepancy/R/session7.R')
j <- predictionSpreadsheet(rawDF, extDisc, extDisc)
View(j)
class(c("a","b","c"))
class(list("a","b","c"))
class(list("a","b","c")[1])
class(list("a","b","c")[[1])
class(list("a","b","c")[[1]])
list("a","b","c")[1]
list("a","b","c")
source('C:/Shahar/Projects/Discrepancy/R/session7.R')
mpred <- analyzePredictionSpreadsheet(pred)
mpred <- analyzePredictionSpreadsheet(j)
p<-plotResiduals(mpred)
print(p)
source('C:/Shahar/Projects/Discrepancy/R/session7.R')
source('C:/Shahar/Projects/Discrepancy/R/session5data.R')
source('C:/Shahar/Projects/Discrepancy/R/session7.R')
source('C:/Shahar/Projects/Discrepancy/R/session6.R')
mainAnalysisFlow()
source('C:/Shahar/Projects/Discrepancy/R/session7.R')
mainAnalysisFlow()
p <- .Last.value
View(p)
p
q <- mainAnalysisFlow()
View(q)
names(q)
View(q)
a=testDByPercentileByLength2
View(a)
class(a)
a=testDByPercentileByLength2()
library(dplyr)
a=testDByPercentileByLength2()
View(a)
t <- fitAlongPercentiles(fitAlongChainLength(a))
t
source('C:/Shahar/Projects/Discrepancy/R/session6.R')
b <- testDByPercentileByLength2();
b
View(b)
lm(1:5 ~ V1, b)
lm(1:5 ~ V1, data.frame(b)
)
b1 <- data.frame(b)
b1
lm(1:5 ~ b, data.frame(b)
)
lm(b ~ 1:5 , data.frame(b))
?lm
b<-data.frame(b)
b["x"]=1:5
b
lm(b ~ x , b)
period1
period1 <- getSamplePlacementData(rawDF)
library(dyplr)
library(dplyr)
period1 <- getSamplePlacementData(rawDF)
View(pperiod1)
View(period1)
source('C:/Shahar/Projects/Discrepancy/R/session6.R')
d <- testDByPercentileByLength2()
View(d)
b <- fitAlongChainLength(d)
View(b)
t <- fitAlongPercentiles(b)
ptiles
coefficients(fitIntercept)
log(d2$intercept)
source('C:/Shahar/Projects/Discrepancy/R/session6.R')
q
?read.csv
a={1,2,3}
a=[1,2,3]
a <- [1,2,3]
a <- c(1,2,3)
a
a <- c(c(1,4,5),c(2,6,3),c(3,6,7))
a
a <- list(c(1,4,5),c(2,6,3),c(3,6,7))
a
lapply(a,function(x) {x[1]})
lapply(a,function(x) {x[2]})
x <- scan("C:\Shahar\Projects\IndexSSP\data.txt", what="", sep="\n")
x <- scan("C:\\Shahar\\Projects\\IndexSSP\\data.txt", what="", sep="\n")
x
y <- strsplit(x, ",")
y
as.numeric("4")
lappply(y,as.numeric())
lapply(y,as.numeric)
z<-lapply(y,as.numeric)
z
z[[1]]
z[[1]][2]
z[[1]][4]
z
lapply(z,`[[`,1)
lapply(z,`[`,-11)
lapply(z,`[`,-1)
lapply(z,sort)
unlist(lapply(z,sort))
unique(unlist(lapply(z,sort)))
unique(unlist(z))
sort(unique(unlist(z)))
?sort
lapply(y,sort,FALSE)
lapply(z,sort,FALSE)
?lapply
lapply(z,sort,TRUE)
?matrix
"A"+c(4,5)
paste("A",c(4,5))
paste("A",paste(c(4,5)))
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
getwd()
source('C:/Shahar/Projects/IndexSSP/session1.R')
getwd()
setwd("C:/Shahar/Projects/IndexSSP")
loopFiles()
a<- list(NA,c("A","B"))
a
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
rep("a",5)
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
loopResults()
?grid.arrange
??grid.arrange
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
auctions <- list(firsts,seconds,nAuctions,trueFloorPrices)
resultByFloorPrice(auctions,0.1)
resultByFloorPrice(auctions,auctions[[4]])
trueFloorPrices <- trueFloorPrices[!recordsToRemove]
trueFloorPrices <- as.numeric(trueFloorPrices)
resultByFloorPrice(auctions,trueFloorPrices)
a=1:10
T
b=c(T,T,T,F,F,F,F)
a=1:7
a*B
a*
b
a*b
sum(a*b)
?attributes
a <- data.frame()
attributes(a) <- list(hello=5, dumb="abty")
a
a$x=1:10
a
mostattributes(a) <- list(hello=5, dumb="abty")
?data.frame
attributes(a)
attributes(a)$hello
a$hello
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
loopResults()
ggplot()+geom_line(data=df, aes(y=wins, x=floorPrice))+geom_point(data=df, aes(y=wins, x=floorPrice))
print ggplot()+geom_line(data=df, aes(y=wins, x=floorPrice))+geom_point(data=df, aes(y=wins, x=floorPrice))
print(ggplot()+geom_line(data=df, aes(y=wins, x=floorPrice))+geom_point(data=df, aes(y=wins, x=floorPrice)))
ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
p1<-ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
print(p1)
df
dev.off()
ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
plot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
plot(data=df, aes(y=wins, x=floorPrice))
plot(df$wins,df$revenue)
print(plot(df$wins,df$revenue))
b
ggplot2(data=b)+geo_point()
ggplot(data=b)+geo_point()
ggplot(data=as.data.frame(b) )+geo_point()
ggplot(data=as.data.frame(b) )+geom_point()
c=as.data.frame(b)
ggplot(data=c )+geom_point()
c
ggplot(data=p )+geom_point()
ggplot(data=p )+geom_point(aes(x=chainLength,y=linearPred))
ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
p <- ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
print(p)
p <- ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
library(ggplot2)
p <- ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
p <- ggplot(data=q )+geom_point(aes(x=ChainLength,y=linearPred))
print(p)
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
tail(df)
mean(auctions[[4]])
head(df)
df[15,]
df[60,]
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
tail(df)
loopFiles()
class(df)
loopFiles()
class(df)
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
class(df)
class(y)
nrow(y)
loopResults
loopResults()
class(df)
ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
p1
p1<-NA
p1<-ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
loopResults()
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
class(p1)
loopFiles()
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
loopResults()
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice, colors=floorPrice))+geom_line()+geom_point()
print(p1)
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice, fill=floorPriceType))+geom_line()+geom_point()
print(p1)
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))+geom_line()+geom_point()
print(p1)
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
fname="results/8aa7fb4e378bd004fcdbb00e918a5e16.csv"
df <- read.csv(fname)
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))+geom_line()f+geom_point()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))+geom_line()+geom_point()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,2))
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,1))
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,0.5))
loopResults()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,0.5))
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
print(p1)
print(p2)
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
?findInterval
?filter
?dplyr::filter
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
rawDF <- readInput()
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
View(mydata)
nrow(data)
nrow(mydata)
nrow(mydata %>% filter (impressions>1000))
nrow(mydata %>% filter (!is.na(floorPrice) && !is.na(isOptimized))
)
head(is.na(mydata$floorPrice))
which(is.na(mydata$floorPrice))
nrow(mydata %>% filter (!is.na(floorPrice) || !is.na(isOptimized))
)
nrow(mydata %>% filter (is.na(floorPrice) || is.na(isOptimized)))
nrow(mydata %>% filter(is.na(floorPrice) || is.na(isOptimized)))
floorPrice
nrow(mydata %>% filter(is.na(isOptimized)))
nrow(mydata %>% filter(!is.na(isOptimized)))
nrow(mydata %>% filter(!is.na(isOptimized)) %>% filter(!is.na(floorPrice)))
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
nrow(mydata %>% filter(is.na(floorPrice) & is.na(isOptimized)))
nrow(mydata %>% filter(!is.na(floorPrice) & !is.na(isOptimized)))
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata<-extractFromChangeColumns(rawDF)
View(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
as.character(4)
as.character("1234")
rawDF <- readInput()
?subset
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
View(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
character(5)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
a<-extractOptimizationGoal(rawDF)
getValueByDate(rawDF$performance_date[i], rawDF$optimizationGoal[i], rawDF$goalChangeDate[i], as.character)
rawDF$performance_date[i]
rawDF$optimizationGoal[i]
rawDF$optimizationGoal[1]
rawDF$optimizationGoal[2]
rawDF$optimizationGoal[3]
head(rawDF$optimizationGoal)
names(rawDF)
head(rawDF$optimization_goal)
getValueByDate(rawDF$performance_date[i], rawDF$optimization_goal[i], rawDF$goal_change_date[i], as.character)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
a<-extractOptimizationGoal(rawDF)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
a<-extractOptimizationGoal(rawDF)
head(a)
tail(a)
View(a)
a
which(is.na(a))
mydata <- extractFromChangeColumns(rawDF)
View(mydata)
plots()
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
unique(mydata$optimizationGoal)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
sum(mydata$optimizationGoal=="A" & mydata$ecpmSlack>0.15 )
?sum
sum(mydata$optimizationGoal=="A" & mydata$ecpmSlack>0.15 , na.rm=TRUE)
sum(mydata$optimizationGoal=="A" , na.rm=TRUE)
6426/22493
sum(mydata$optimizationGoal=="b" , na.rm=TRUE)
sum(mydata$optimizationGoal=="B" , na.rm=TRUE)
sum(mydata$optimizationGoal=="B" & mydata$ecpmSlack>0.15 , na.rm=TRUE)
1449/3744
?transmute
data %>% mutate(highSlack=ecpm_slack > 0.15)
library(dplyr)
data %>% mutate(highSlack=ecpm_slack > 0.15)
mydata %>% mutate(highSlack=ecpm_slack > 0.15)
mydata %>% mutate(highSlack=ecpmSlack > 0.15)
?group_by
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(optimizationGoal,highSlack) %>% summarise(count)
?summarise
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(optimizationGoal,highSlack) %>% summarise(count(optimizationGoal)
)
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),highSlack) %>% summarise(count(optimizationGoal))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(count(optimizationGoal))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(sum(1)))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(sum(1))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(count(1))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
?geom_histogram
?between
mydata %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
mydata %>% filter(meaningfulImpressions & meaningfulFloorPrice & !is.na(optimizationGoal)) %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
library(dplyr)
mydata %>% filter(meaningfulImpressions & meaningfulFloorPrice & !is.na(optimizationGoal)) %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
mydata %>% filter(meaningfulImpressions & meaningfulFloorPrice & !is.na(optimizationGoal) & isOptimized==1) %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
install.packages("Hmisc")
library(Hmisc)
?wtd.quantile
?quantile
seq(0.1,1)
seq(0.1,0.2,1)
seq(0.1,1,0.2)
?dplytr::quantile
?dplyr::quantile
?dplyr::summarize
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots()
plots(mydata)
View(mydata)
?quanitle
?quantile
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
mydata(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack))
mydata %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)
quantile(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack), probs=seq(0.1, 1, 0.1) )
names(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack))
head(as.vector(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)))
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
v<-mydata %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)
class(v)
names(v)
nrow(v)
qunatile(v,0.5)
quantile(v,0.5)
quantile(v$ecpmSlack,0.5)
quantile(as.vector(v),0.5)
quantile(unlist(v),0.5)
quantile(v,0.5)
class(unlist(v))
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
?for
{}
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
rawDF<-readInput()
mydata <- extractFromChangeColumns(rawDF)
rawDF =
1
rawDF =
rawDF = 1
1
rawDF<-readInput()
mydata <- extractFromChangeColumns(rawDF)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(data)
plots(mydata)
nrow(mydata)
nrow(data2)
nrow(subset(data2, ecpmSlack >0.15))
nrow(subset(data2, goalType=="B", ecpmSlack >0.15))
nrow(subset(data2, goalType=="B"& ecpmSlack >0.15))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.15))
nrow(subset(data2, optimizationGoal=="B"))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.25))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.35))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.3))
nrow(subset(data2, optimizationGoal=="A+"& ecpmSlack >0.3))
nrow(subset(data2, optimizationGoal=="A"& ecpmSlack >0.081))
3357/11187
g
source('C:/Shahar/Projects/LostImpressions/session4.R')
DFout <- session4(rawDF)
rawDF
getwd()
?mutate
source('C:/Shahar/Projects/LostImpressions/session4.R')
?mutate
source('C:/Shahar/Projects/LostImpressions/session4.R')
a<-session4(rawDF)
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
a<-session4(rawDF)
?tapply
source('C:/Shahar/Projects/LostImpressions/session4.R')
a<-session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a<-session4(rawDF)
