scale_date=date-365*(year_group-2014),
year_group=as.factor(year_group)) %>%
filter(date >='2014-12-01' & month %in% c(1,2,3,12))
class(q8$year)
class(q8$year_group)
class(q7$date)
class(q8$date)
q8 %>% filter (date >='2014-12-01') %>% head() %>% View()
q8 %>% head() %>% View()
q7 %>% head() %>% View()
q7 %>% filter (date >='2014-12-01') %>% head() %>% View()
View(q8)
head(q7$year+ifelse(month==12,1,0))
head(q7$year+ifelse(q7$month==12,1,0))
head(q8$year+ifelse(q8$month==12,1,0))
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
View(q8)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
head(q8$year)
head(q8$month)
head(q8 %>% mutate(is12=month==12))
head(q8 %>% mutate(is12=month==12)) %>% `[[`("is12")
head(q8 %>% mutate(is12=ifelse(month==12,1,0)) %>% `[[`("is12")
head(q8 %>% mutate(is12=ifelse(month==12,1,0))) %>% `[[`("is12")
head(q8 %>% mutate(is12=year+ifelse(month==12,1,0))) %>% `[[`("is12")
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
View(q9)
q9$year_group[1593]
q9$year[1593]
ifelse(q9$month[1593]==12,1,0)
q9$year[1593]ifelse(q9$month[1593]==12,1,0)
q9$year[1593]+ifelse(q9$month[1593]==12,1,0)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
q9$year[1593]
q9$year_group[1593]
unique(q9$year_group)
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
q9$year_group[1593]
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
class(q7)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
class(q7)
class(q8)
class(q9)
pq7
nrow(q8)
q9$year_group[1593]
q9$year[1593]
q9$month[1593]
q9$month[1793]
q9$month[2793]
q9$year[2793]
q9$year_group[2793]
q8 %>% group_by(available_down,year_group) %>% arrange(available_down,year_group) %>% mutate(cnt=n()) %>% View()
q8 %>% group_by(available_down,year_group) %>% arrange(available_down,date) %>% mutate(cnt=n()) %>% View()
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
?week
?julian
weekdays('2016-06-21')
weekdays(as.Date('2016-06-21'))
weekdays(as.Date('2016-06-21'),T)
as.POSIXlt(head(q7$date))$wday
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
View(q7)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
View(q7)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
View(q7)
View(q8)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
View(q7)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
View(q9)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
nrow(q9)
nrow(q8)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
nrow(q8)
nrow(q9)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
nrow(q8)
nrow(q9)
unique(q8$year_group)
sum(q8$year_group==2015 & ecpm_bin==0)
sum(q8$year_group==2015 & q8$ecpm_bin==0)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
nrow(q9)
pq7
pq7 +scale_x_date(date_labels="%m/%d")
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
pq8
nrow(q10)
nrow(q10 %>% filter(ecpm_bin<1.21))
unique(q10$n_available)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
class(q10$n_available)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
pq8
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq8
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq8
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq8
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq8
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq8
pq8 + scale_y_log10()
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
pq7 + timePlotFormat()
pq7 + timePlotFormat() + scale_y_continuous(labels=scales::percent)
pq7 + theme(axis.text=element_text(size=14,face="bold")) + scale_y_continuous(labels=scales::percent)
pq7 + theme(axis.text=element_text(size=14,face="bold"),axis.title=element_text(size=14, face="bold")) + scale_y_continuous(labels=scales::percent)
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
source('C:/Shahar/Projects/fillRateCheckup2016/session5.r')
pq7
?rbind
source('C:/Shahar/Projects/fillRateCheckup2016/session5.R')
pq9
nrow(pq9)
nrow(q9.6)
nrow(q9.6 %>% filter(ecpm_bin==0))
source('C:/Shahar/Projects/fillRateCheckup2016/session5.R')
pq9
class(pq9)
names(q9.6)
debugSource('C:/Shahar/Projects/fillRateCheckup2016/session5.R')
dbstack()
dbstack
source('C:/Shahar/Projects/fillRateCheckup2016/session5.R')
pq9
source('C:/Shahar/Projects/fillRateCheckup2016/session5.R')
pq9
source('C:/Shahar/Projects/fillRateCheckup2016/session5.R')
pq9
q %>% filter(clean_url="baseballprospectus.com") %>% View()
q %>% filter(clean_url=="baseballprospectus.com") %>% View()
q %>% filter(clean_url=="baseballprospectus.com") %>% arrange(date) %>% View()
q %>% filter(clean_url=="baseballprospectus.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions))
q %>% filter(clean_url=="baseballprospectus.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + xlim("2016-04-01")
q %>% filter(clean_url=="baseballprospectus.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + xlim(c("2016-04-01","2016-06-10")
)
q %>% filter(clean_url=="baseballprospectus.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + coord_cartesian(xlim=c("2016-04-01","2016-06-10"))
q %>% filter(clean_url=="baseballprospectus.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + coord_cartesian(xlim=as.Date(c("2016-04-01","2016-06-10"))
)
q %>% filter(clean_url=="baykoreans.net") %>% arrange(date) %>% View()
q %>% filter(clean_url=="baykoreans.net") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions))
q %>% filter(clean_url=="baykoreans.net") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + geom_line(aes(x=date,y=impressions),color="red")
q %>% filter(clean_url=="baykoreans.net") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + geom_line(aes(x=date,y=impressions/max(impressions)),color="red")
q %>% filter(clean_url=="baykoreans.net") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + geom_line(aes(x=date,y=min(impressions, 165000)/165000),color="red")
q %>% filter(clean_url=="bballbreakdown.net") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + geom_line(aes(x=date,y=impressions/max(impressions)),color="red")
q %>% filter(clean_url=="bballbreakdown") %>% arrange(date) %>% View()
q %>% filter(clean_url=="bd-pratidin.com") %>% arrange(date) %>% View()
q %>% filter(clean_url=="bdnews24.com") %>% arrange(date) %>% View()
q %>% filter(clean_url=="bdnews24.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + geom_line(aes(x=date,y=impressions/max(impressions)),color="red")
q %>% filter(clean_url=="beautyandstyle365.com") %>% arrange(date) %>% View()
q %>% filter(clean_url=="beautyandstyle365.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + geom_line(aes(x=date,y=impressions/max(impressions)),color="red")
q %>% filter(clean_url=="beautystylefitness.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + geom_line(aes(x=date,y=impressions/max(impressions)),color="red")
q %>% filter(clean_url=="beepjob.co.uk") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date, y=served/impressions)) + geom_line(aes(x=date,y=impressions/max(impressions)),color="red")
q %>% filter(clean_url=="beepjob.co.uk") %>% arrange(date) %>% View()
a %>% filter(clean_url=="beepjob.co.uk") %>% arrange(date,tagid) %>% View()
a %>% filter(clean_url=="beepjob.co.uk") %>% arrange(date,tagid) %>% ggplot() + geom_line(aes(x=date,y=fill, color=tagid))
a %>% filter(clean_url=="beepjob.co.uk") %>% arrange(date,tagid) %>% ggplot() + geom_line(aes(x=date,y=fill,group=tagid, colour=tagid))
a %>% filter(clean_url=="beforeitsnews.com") %>% arrange(date,tagid) %>% ggplot() + geom_line(aes(x=date,y=fill,group=tagid, colour=tagid))
a %>% filter(clean_url=="beforeitsnews.com") %>% arrange(date,tagid) %>% ggplot() + geom_line(aes(x=date,y=fill,group=tagid, colour=tagid))+ axis.Date()
q %>% filter(clean_url=="beforeitsnews.com") %>% arrange(date,tagid) %>% ggplot() + geom_line(aes(x=date,y=fill,group=tagid, colour=tagid))
q %>% filter(clean_url=="beforeitsnews.com") %>% arrange(date,tagid) %>% ggplot() + geom_line(aes(x=date,y=fill))
q %>% filter(clean_url=="beforeitsnews.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date,y=fill))
q %>% filter(clean_url=="beforeitsnews.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date,y=served/impressions))
q %>% filter(clean_url=="befruity.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date,y=served/impressions))
q %>% filter(clean_url=="befruity.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date,y=served/impressions))+ geom_line(aes(x=date, y=served/impressions)) + geom_line(aes(x=date,y=impressions/max(impressions)),color="red")
q %>% filter(clean_url=="beichthaus.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date,y=served/impressions))+ geom_line(aes(x=date, y=served/impressions)) + geom_line(aes(x=date,y=impressions/max(impressions)),color="red")
q %>% filter(clean_url=="beliefnet.com") %>% arrange(date) %>% ggplot() + geom_line(aes(x=date,y=served/impressions))+ geom_line(aes(x=date, y=served/impressions)) + geom_line(aes(x=date,y=impressions/max(impressions)),color="red")
q %>% filter(clean_url=="beliefnet.com") %>% arrange(date) %>% View()
q %>% filter(clean_url=="belloflostsouls.net") %>% arrange(date) %>% View()
source('C:/Shahar/Projects/fillRateCheckup2016/session3.R')
q %>% head(1000) %>% View()
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
q11 %>% head(1000) %>% View()
q11 %>% select(-site, timestamp, network, status, available, num, available_down) %>% head(1000) %>% View()
q11 %>% select(-site, -timestamp, -network, -status, -available, -num, -available_down) %>% head(1000) %>% View()
?rle
?rep
rep(0,10)
length(rep(0,10))
?ddply
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
debugSource('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
x
y
data.frame(x=x,y=y) %>% View()
debugSource('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
Q
debugSource('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
data.frame(x=x,y=y) %>% View()
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
q12 %>% select(-site, -timestamp, -network, -status, -available, -num, -available_down) %>% head(1000) %>% View()
?lag
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
q12 %>% select(-site, -timestamp, -network, -status, -available, -num, -available_down) %>% head(1000) %>% View()
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
julian.Date(julian(1:10,as.Date('2016-01-01')))
julian(1:10,as.Date('2016-01-01'))
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
pq12
?hcl
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
pq12+geom_smooth()
?geom_smooth
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
?geom_smooth
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
pq13 + facet_wrap(~ecpm_bin)
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
q13 %>% View()
min(10,2)
min(1.5,2)
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
q13 %>% View()
NA>@
NA>2
ifelse(NA,1,0)
1 || NA
NA || 1
julian(as.Date('2015-01-05'))
weekdays.Date("1970-01-01")
weekdays.Date(as.Date("1970-01-01"))
julian(as.Date("1970-01-01"))
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
q13 %>% View()
?rollmean
rollmean(1:10,3)
rollmean(1:10,3,fill=NA)
rollmean(1:10,3,fill=extend)
rollmean(1:10,3,fill="extend")
rollmean(1:10,7,fill="extend")
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
length(rollmean(q12$revenue,7,fill="extend", align="center"))
nrow(q12)
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
rollmean(1:3,7,fill="extend")
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
rollmean(c(NA,NA,NA,NA,NA),3)
rollmean(c(NA,NA,NA,NA,NA),3,fill="extend",align="center")
rollmean(c(1,NA,NA,NA,3),3,fill="extend",align="center")
rollmean(c(1,NA,NA,4,3),3,fill="extend",align="center")
rollmean(c(1,NA,5,NA,3),3,fill="extend",align="center")
rollmean(c(1,NA,5,5,3),3,fill="extend",align="center")
rollmean(c(1,5,5,3),3,fill="extend",align="center")
rollmean(c(1,NULL,5,5,3),3,fill="extend",align="center")
rollmean(c(1,NULL,5,5,3,NULL),3,fill="extend",align="center")
rollmean(c(1,NULL,5,5,3,NA),3,fill="extend",align="center")
rollmean(c(1,5,5,3,NA),3,fill="extend",align="center")
rollmean(c(NA,5,5,3,NA),3,fill="extend",align="center")
rollmean(c(NA,5,5,3,1),3,fill="extend",align="center")
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq13
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq12
pq13
names(q12)
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
# 2016-06-23
q15 %>% View()
q15 %>% filter(ecpm_bin==-inf, qualify==0) %>% nrow
q15 %>% filter(ecpm_bin==-Inf, qualify==0) %>% nrow
q15 %>% filter(ecpm_bin==-Inf, qualify==1) %>% nrow
q13 %>% filter(ecpm_bin==-Inf) %>% View()
q13 %>% filter(ecpm_bin==-Inf, revenue7 <-1e-10) %>% View()
q13 %>% filter(ecpm_bin==-Inf, revenue7 < -1e-10) %>% View()
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
View(q1)
View(q15)
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
source('C:/Shahar/Projects/fillRateCheckup2016/session5.R')
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq14
??day.of.week
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq14
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq14
unique(q15$year_group)
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
pq14
unique(q15$year_group)
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
unique(q15$year_group)
pq14
source('C:/Shahar/Projects/fillRateCheckup2016/session6.R')
nrow(a)
a %>% head() %>% View()
source("../libraries.R")
a %>% head() %>% View()
first(c(1,2,3))
first(c(NA,2,3))
first(c(NA,2,3),na.rm=T)
?firtst
?first
?complete.cases
first(na.omit(NA,2,3))
na.pass(NA,2,3))
na.pass(NA,2,3)
na.omit(NA,2,3)
na.omit(c(NA,2,3))
first(na.omit(c(NA,2,3)))
ls()
?month
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p
ggplot(a4) + geom_line(aes(x=date,y=median_margin,colour=floor_price_bin))
ggplot(a4) + geom_line(aes(x=date,y=median_norm_floor,colour=as.factor(floor_price_bin)))
ggplot(a4) + geom_line(aes(x=date,y=median_norm_floor,colour=as.factor(floor_price_bin), group=floor_price_bin))
ggplot(a4) + geom_line(aes(x=date,y=median_norm_floor,colour=as.factor(floor_price_bin), group=floor_price_bin)) + coord_cartesian(ylim=0,2)
View(a4)
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
View(a4)
round(0.2)
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p <- ggplot(a5) + geom_line(aes(x=date,y=median_margin,colour=as.factor(floor_price_bin), group=floor_price_bin))
p
p <- ggplot(a5 %>% filter(floor_pric_bin <=2)) + geom_line(aes(x=date,y=median_margin,colour=as.factor(floor_price_bin), group=floor_price_bin))
p <- ggplot(a5 %>% filter(floor_price_bin <=2)) + geom_line(aes(x=date,y=median_margin,colour=as.factor(floor_price_bin), group=floor_price_bin))
p
p <- ggplot(a5 %>% filter(floor_price_bin <=2)) + geom_line(aes(x=date,y=median_norm_floor,colour=as.factor(floor_price_bin), group=floor_price_bin))
p
View(a5)
nrow(a4)
View(a4)
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p
p+axis.Date()
p+axis.Date(date)
?axis.Date(date)
?axis.Date("x",date)
p+axis.Date(1)
p+axis.Date(1,x=date)
p+axis.Date(1,x="date")
p+axis.Date(1,x=c(as.Date("2014-01-01","2016-06-15"),at=seq(as.Date("2014-01-01"),1,30)
)
p+scale_x_date()
p+scale_date()
class(a5$date)
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p2
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p1
p1+coord_cartesian(ylim=c(0.5,1.25))
p1+coord_cartesian(ylim=c(0.7,1.25))
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p1+coord_cartesian(ylim=c(0.7,1.25))
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p1+coord_cartesian(ylim=c(0.7,1.25))
p1+coord_cartesian(ylim=c(0.7,2))
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p1+coord_cartesian(ylim=c(0.7,2))
p1+coord_cartesian(ylim=c(0.6,1.25))
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p1+coord_cartesian(ylim=c(0.6,1.25))
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
x <- a4 %>% mutate(ref_floor_price=first(floor_price))
x <- a4 %>% mutate(ref_floor_price=first(floor_price), floor_price_bin=round(ref_floor_price*2.5)/2.5)
x <- a4 %>% mutate(ref_floor_price=first(floor_price), floor_price_bin=round(ref_floor_price*2.5)/2.5, norm_floor=ifelse(floor_price_bin==0,floor_price+1,floor_price/ref_floor_price))
class(x$floor_price_bin)
class(x$floor_price)
class(x$floor_price+1)
length(x$floor_price+1)
length(x$floor_price/z$ref_floor_price)
length(x$floor_price/x$ref_floor_price)
class(x$floor_price/x$ref_floor_price)
x <- a4 %>% mutate(ref_floor_price=first(floor_price), floor_price_bin=round(ref_floor_price*2.5)/2.5, norm_floor=floor_price+1)
x <- a4 %>% mutate(ref_floor_price=first(floor_price), floor_price_bin=round(ref_floor_price*2.5)/2.5, norm_floor=floor_price/ref_floor_price)
x <- a4 %>% mutate(ref_floor_price=first(floor_price), floor_price_bin=round(ref_floor_price*2.5)/2.5, norm_floor=ifelse(floor_price_bin==0,floor_price+1,floor_price/ref_floor_price))
x <- a4 %>% mutate(ref_floor_price=first(floor_price)) %>% ungroup() %>% floor_price_bin=round(ref_floor_price*2.5)/2.5, norm_floor=ifelse(floor_price_bin==0,floor_price+1,floor_price/ref_floor_price))
x <- a4 %>% mutate(ref_floor_price=first(floor_price)) %>% ungroup() %>% mutate(floor_price_bin=round(ref_floor_price*2.5)/2.5, norm_floor=ifelse(floor_price_bin==0,floor_price+1,floor_price/ref_floor_price))
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p1
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p1
0.3*2.5
0.2*2.5
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p2
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
p1
p2
p2 <- ggplot(a6 %>% filter(floor_price_bin <=2)) +
geom_line(aes(x=as.Date(date),y=served_frac,colour=as.factor(floor_price_bin), group=floor_price_bin),size=2) +
coord_cartesian(ylim=c(0,1))+
scale_x_date()
p2
p3 <- ggplot(a6 %>% filter(floor_price_bin <=2)) +
geom_line(aes(x=date,y=median_margin,colour=as.factor(floor_price_bin), group=floor_price_bin),size=2) +
coord_cartesian(ylim=c(0,1))+
scale_x_date()
p3
source('C:/Shahar/Projects/fillRateCheckup2016/session7.R')
print(1)
a4 <- a3 %>%
mutate(date=as.Date(date),
year_mon=as.yearmon(date),
ecpm=ifelse(served==0,NA,1000*revenue/served),
profit_ecpm=ifelse(served==0,NA,1000*profit/served),
margin=1-floor_price/ecpm) %>%
group_by(tagid) %>%
filter(!all(is.na(floor_price)),
min(date)<='2016-01-30',
date>='2016-01-01') %>%
mutate(ref_floor_price=first(floor_price)) %>%
ungroup()
p4
p4 <- ggplot(a6 %>% filter(floor_price_bin <=2)) +
geom_line(aes(x=date,y=revshare,colour=as.factor(floor_price_bin), group=floor_price_bin),size=2) +
scale_x_date()
p4
names(a5)
names(a4)
names(a3)
names(a)
