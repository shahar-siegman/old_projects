source('C:/Shahar/Projects/discrepancy2016/session1.R')
df <- loadDF()
View(df)
source('C:/Shahar/Projects/discrepancy2016/session1.R')
analysis1(preprocess(df))
source('C:/Shahar/Projects/discrepancy2016/session1.R')
analysis1(preprocess(df))
source('C:/Shahar/Projects/discrepancy2016/session1.R')
analysis1(preprocess(df))
source('C:/Shahar/Projects/discrepancy2016/session1.R')
analysis1(preprocess(df))
source('C:/Shahar/Projects/discrepancy2016/session1.R')
analysis1(preprocess(df))
source('C:/Shahar/Projects/discrepancy2016/session1.R')
analysis1(preprocess(df))
source('C:/Shahar/Projects/discrepancy2016/session1.R')
analysis1(preprocess(df))
hist(df)
hist(preprocess(df)$discrepancy)
hist(preprocess(df)$discrepancy, plot=F)
hist(preprocess(df)$discrepancy, plot=F, breaks=seq(0,1,0.02))
hist(preprocess(df) %>% filter(discrepancy>=0, discrepancy<=1) %>% `[[`("discrepancy"), plot=F, breaks=seq(0,1,0.02))
res <- hist(preprocess(df) %>% filter(discrepancy>=0, discrepancy<=1) %>% `[[`("discrepancy"), plot=F, breaks=seq(0,1,0.02))
View(res)
data.frame(breaks=res$breaks, cnt = res$counts) %>% View()
data.frame(breaks=res$mids, cnt = res$counts) %>% View()
source('C:/Shahar/Projects/discrepancy2016/session1.R')
res <-analysis2(df)
source('C:/Shahar/Projects/discrepancy2016/session1.R')
res <-analysis2(df)
View(res)
source('C:/Shahar/Projects/discrepancy2016/session1.R')
analysis2(df) %>% View()
?ntile
source('C:/Shahar/Projects/discrepancy2016/session1.R')
df1 <- analysis1(df)
View(df1)
df1 <- preprocess(df)
View(df1)
df1 %>% filter(discrepancy > 0, served >5, impressions > 200) %>% arrange(discrepancy) %>% View()
save_result(df)
saveResult(df)
write.csv(analysis2(df), "discrepancy_summary.csv")
analysis2(df)
source('C:/Shahar/Projects/discrepancy2016/session1.R')
write.csv(analysis2(df), "discrepancy_summary.csv")
source('C:/Shahar/Projects/discrepancy2016/session1.R')
df2 <- analysis2(df)
View(df2)
source('C:/Shahar/Projects/discrepancy2016/session1.R')
df2 <- analysis2(df)
View(df2)
df %>% arrange(tagid) %>% select(tagid) %>% unique() %>% View()
source('C:/Shahar/Projects/discrepancy2016/session1.R')
analysis3(df)
saveResult3(df)
source('C:/Shahar/Projects/discrepancy2016/session1.R')
saveResult3(df)
saveResult3(df, 10000)
saveResult3(df, ntop=10000)
?dcast
?str_replace
library(stringr)
?str_replace
str_replace_all('o1:e3:e6:e5:e32','[0-9]+:?','')
str_replace_all('o1:e3:e6:e5:e32','[0-9]+','')
filenames=c(publir="publir/publir_discrep_data.csv",
sltrib="sltrib/discrepancy_sltrib_all_placements.csv")
a <- read.csv(filenames[sltrib],stringsAsFactors = F)%>%
filter(stat1>100) %>% mutate(discrep=lost_imp/stat1, fill=served/stat1, net_discrep=lost_imp/house)
a <- read.csv(filenames["sltrib"],stringsAsFactors = F)%>%
filter(stat1>100) %>% mutate(discrep=lost_imp/stat1, fill=served/stat1, net_discrep=lost_imp/house)
a <- read.csv(filenames["sltrib"],stringsAsFactors = F)#%>%
a <- read.csv(filenames["sltrib"],stringsAsFactors = F)%>%
filter(stat1>100) %>% mutate(discrep=lost_imp/stat1, fill=served/stat1, net_discrep=lost_imp/house)
a <- read.csv(filenames["sltrib"],stringsAsFactors = F)%>%  filter(stat1>100) %>% mutate(discrep=lost_imp/stat1, fill=served/stat1, net_discrep=lost_imp/house)
library(dplyr)
library(ggplot2)
library(stringr)
a <- read.csv(filenames["sltrib"],stringsAsFactors = F)%>%  filter(stat1>100) %>% mutate(discrep=lost_imp/stat1, fill=served/stat1, net_discrep=lost_imp/house)
?str_join
?paste
paste0(c("abc","def"))
paste0(c("abc","def"), collapse="")
paste0(c("abc","def"), collapse=":")
networks <- str_replace_all(a$chain,'[0-9]+','') %>%
paste0(collapse=":") %>% strsplit(":") %>% unlist() %>% unique()
networks
networks <- str_replace_all(a$chain,'[0-9]+|h','') %>%
paste0(collapse=":") %>% strsplit(":") %>% unlist() %>% unique()
networks <- str_replace_all(a$chain,'[0-9]+|h','') %>%
paste0(collapse=":") %>% strsplit(":") %>% unlist() %>% unique()
networks
c("a","b","c") %>% filter("C")
c("a","b","c") %>% remove("c")
?filter
c("a","b","c") !="c"
c("a","b","c") %>% !="c"
c("a","b","c") %>% !=
x <- c("a","b","c")
x[x!="c"]
x %>% `[`(x!="c")
x %>% `!=`"c"
source('C:/Shahar/Projects/discrepancy2016/learning_chain_discrepancy.R')
View(a)
source('C:/Shahar/Projects/discrepancy2016/learning_chain_discrepancy.R')
print(p)
?facet_wrap
source('C:/Shahar/Projects/discrepancy2016/learning_chain_discrepancy.R')
print(p)
source('C:/Shahar/Projects/discrepancy2016/learning_chain_discrepancy.R')
a <- read.csv(filenames["sltrib"],stringsAsFactors = F)%>%
source('C:/Shahar/Projects/discrepancy2016/learning_chain_discrepancy.R')
ggplot(a %>% filter(n_tags==2),aes(x=stat1,y=lost_imp,colour=network)) +
geom_point()+
geom_smooth(method="lm",formula=y ~ x+0, fullrange=T)
p <- ggplot(a %>% filter(n_tags==2),aes(x=stat1,y=lost_imp,colour=network)) +
geom_smooth(method="lm",formula=y ~ x+0, fullrange=T)
facet_wrap(~n_tags, scales="free")
print(p + coord_cartesian(xlim=c(0,30000)))
print(p + coord_cartesian(xlim=c(0,300000)))
print(p)
p+geom_point()
p+geom_point() + coord_cartesian(xlim=c(0,300000))
p+geom_point() + coord_cartesian(xlim=c(0,30000))
p+geom_point() + coord_cartesian(xlim=c(0,20000),ylim=c(0,5000))
