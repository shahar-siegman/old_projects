b <- session4(rawDF)
class("2015-10-01")
as.Date("2015-10-01")
class(as.Date("2015-10-01"))
as.Date("2015-10-01")+35
"2015-10-01"+35
source('C:/Shahar/Projects/LostImpressions/session4.R')
df3 <- session4(rawDF)
?dddply
source('C:/Shahar/Projects/LostImpressions/session4.R')
df3 <- session4(rawDF)
p2 <- ggplot(df3) +
geom_hist(aes(x=resid_served,y=..scaled..),color="red", alpha=0.5) +
geom_hist(aes(x=resid2_served,y=..scaled..),color="blue", alpha=0.5)
source('C:/Shahar/Projects/LostImpressions/session4.R')
df3 <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
df3 <- session4(rawDF)
View(df3)
write.csv(df3,"df3.csv")
source('C:/Shahar/Projects/LostImpressions/session4.R')
write.csv(df3,"df3.csv")
df3 <- session4(rawDF)
write.csv(df3,"df3.csv")
source('C:/Shahar/Projects/LostImpressions/session4.R')
write.csv(df3,"df3.csv")
df3 <- session4(rawDF)
write.csv(df3,"df3.csv")
source('C:/Shahar/Projects/LostImpressions/session4.R')
?join
source('C:/Shahar/Projects/LostImpressions/session4.R')
c("A","B")[2]
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
?ddply
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
View(DF)
nrow(DF$smooth_served - DF$served)
nrow(DF$smooth_served)
paste("A","B")
paste("A","B",sep="")
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
nrow(DF$smooth_served - DF$served)
nrow(DF$smooth_served)
names(DF)
nrow(DF)
nrow(DF[,"smooth_served"])
nrow(DF[,"placement_id"])
nrow(DF[,"date"])
length(DF[,"date"])
length(DF[,"smooth_served"])
DF$served_resid <- DF$smooth_served - DF$served
?rename
?setNames
setNames("A","B")
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
View(DF)
DF <- DF %>% select(-placement_id.y)
View(DF)
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
a[[3]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
write.csv(a[[4]],"df3.csv")
a[[4]]
write.csv("df3.csv",a[[4]],)
write.csv("df3.csv",a[[4]])
?write.csv
write.csv(a[[4]],"df3.csv")
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
a[[3]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
DF
df <- a[[4]]
names(df)
class(df$date)
max(df$date)
df$dateDiff <- max(df$date)-df$date
head(df$dateDiff)
p1 <- ggplot(DF, aes(x=kserved_resid, y=served_resid, color=dateDiff)) +
geom_point() +
facet_wrap(~placement_id,scale="free") +
geom_smooth(method='lm',formula=y~x + 0, na.rm=T)
p[1]
p1
ggplot(df, aes(x=kserved_resid, y=served_resid, color=dateDiff)) +
geom_point() +
facet_wrap(~placement_id,scale="free") +
geom_smooth(method='lm',formula=y~x + 0, na.rm=T)
ggplot(df, aes(x=kserved_resid, y=served_resid, color=as.numeric(dateDiff))) +
geom_point() +
facet_wrap(~placement_id,scale="free") +
geom_smooth(method='lm',formula=y~x + 0, na.rm=T)
p1 <- ggplot(DF, aes(x=kserved_resid/impressions, y=served_resid/impressions, color=as.factor(period))) +
geom_point() +
facet_wrap(~placement_id,scale="free") +
geom_smooth(method='lm',formula=y~x + 0, na.rm=T)
p1
ggplot(df, aes(x=kserved_resid/impressions, y=served_resid/impressions, color=as.numeric(dateDiff))) +
geom_point() +
facet_wrap(~placement_id,scale="free") +
geom_smooth(method='lm',formula=y~x + 0, na.rm=T)
head(df)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
df <- a[[4]]
head(df)
source('C:/Shahar/Projects/LostImpressions/session4.R')
df <- a[[4]]
a <- session4(rawDF)
df <- a[[4]]
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
a[[3]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
?geom_abline
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
df <- a[[4]]
View(df)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
log(2)
log(exp(1))
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
a[[1]]
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
a[[2]] + xlim(-1,1)
names(rawDF)
?write.csv
isempty("")
?empty
""==""
""==NA
""=="Ab"
ave(c(4,4,4,5,6,6,7,7,))
ave(c(4,4,4,5,6,6,7,7,4))
ave(c(4,4,4,5,6,6,7,7,4))[1]
?Ave
?ave
mean(c(4,4,4,5,6,6,7,7,4))
source('C:/Shahar/Projects/LostImpressions/session5.R')
source('C:/Shahar/Projects/LostImpressions/session4.R')
source('C:/Shahar/Projects/LostImpressions/session5.R')
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
rawDF <- read.csv(paste(currdir,'kettle_placement_data_with_komoona_served.csv',sep=""))
View(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
rawDF <- read.csv(paste(currdir,'sample_placement_data_with_komoona_served.csv',sep=""))
View(rawDF)
runSession4()
View(rawDF)
runSession4()
names(DF)
runSession4()
names(DF)
runSession4()
names(DF %>% select(placement_id, date, impressions, served, kserved=komoona_served, komooona_fill=komoona_served/impressions))
names(DF %>% select(placement_id)) #, date, impressions, served, kserved=komoona_served, komooona_fill=komoona_served/impressions))
names(DF %>% select(placement_id, date, impressions, served, kserved=komoona_served ))#, komooona_fill=komoona_served/impressions))
names(DF %>% select(placement_id, date, impressions, served, kserved=komoona_served , komooona_fill=komoona_served/impressions))
names(DF %>% select(kserved=komoona_served , komooona_fill=komoona_served/impressions))
names(DF %>% select(kserved=komoona_served , komooona_fill=komoona_served/impressions, placement_id))
runSession4()
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
names(DF %>% select(placement_id, date, impressions, served, kserved=komoona_served, komooona_fill=komoona_served/impressions) %>% filter(impressions>500, served>40))
names(DF %>% select(placement_id, date, impressions, served, kserved=komoona_served) %>% mutate(komooona_fill=komoona_served/impressions) %>% filter(impressions>500, served>40))
names(DF %>% select(placement_id, date, impressions, served, kserved=komoona_served, komooona_fill=kserved/impressions) %>% filter(impressions>500, served>40))
names(DF %>% transmute(placement_id, date, impressions, served, kserved=komoona_served, komooona_fill=kserved/impressions) %>% filter(impressions>500, served>40))
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
names(DF)
series
runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a<-runSession4()
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a<-runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
a<-runSession4()
a[[2]]
a[[2]]+face_wrap(~placement_id, scate="free")
a[[2]]+facet_wrap(~placement_id, scate="free")
a[[2]]+facet_wrap(~placement_id, scale="free")
source('C:/Shahar/Projects/LostImpressions/session4.R')
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
names(DF)
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
num
DF
names(DF)
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
a <- runSession5()
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
a <- runSession5()
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- runSession5()
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
source('C:/Shahar/Projects/LostImpressions/session5.R')
session5Plots(a[[2]])
a<-session5Plots(a[[2]])
source('C:/Shahar/Projects/LostImpressions/session5.R')
a<-session5Plots(a[[2]])
a<-session5Plots(a[[1]])
a[[2]]
a[[3]]
a[[2]]
mydf <- read.delim("clipboard")
ggplot(data=mydf) + geom_density(aes(x=a))
names(df)
names(mydf)
names(mydf) < c("a")
ggplot(data=mydf) + geom_density(aes(x=a))
mydf <- read.delim("clipboard")
names(mydf) < c("a")
names(mydf) <- c("a")
ggplot(data=mydf) + geom_density(aes(x=a))
mydf <- read.delim("clipboard")
names(mydf)
ggplot(data=mydf) + geom_density(aes(x=pred.to.orig)) + facet_wrap(~placement_if)
ggplot(data=mydf) + geom_density(aes(x=pred.to.orig)) + facet_wrap(~placement_id)
ggplot(data=mydf) + geom_histogram(aes(x=pred.to.orig)) + facet_wrap(~placement_id)
ggplot(data=mydf) + geom_histogram(aes(x=pred.to.orig), binwidth=0.05) + facet_wrap(~placement_id)
source('C:/Shahar/Projects/LostImpressions/session5.R')
a<-session5Plots(a[[1]])
source('C:/Shahar/Projects/LostImpressions/session5.R')
a<-session5Plots(a[[1]])
a[[4]]
a<-session5(a[[1]])
a[[4]]
runSession5()
source('C:/Shahar/Projects/LostImpressions/session5.R')
a<-runSession5()
a[[4]]
source('C:/Shahar/Projects/LostImpressions/session5.R')
a[[4]] + coord_cartesian(ylim=c(0,2))
source('C:/Shahar/Projects/LostImpressions/session4.R')
?ddply
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
debugSource('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
View(DF)
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
a <- runSession5()
key
names(DF)
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session5.R')
a <- runSession5()
a[[4]]
source('C:/Shahar/Projects/LostImpressions/session5.R')
a[[4]]
a <- runSession5()
a[[4]]
p4 <- ggplot(a[[1]] %>% filter(placement_id="0e42430f825c80036fd1b0a06f6425b9")) +
geom_line(aes(x=date,y=serv_ratio_global,color=nondescript_chain)) +
geom_line(aes(x=date,y=serv_ratio_mobile,color=nondescript_chain)) +
coord_cartesian(ylim=c(0,2))
p4 <- ggplot(a[[1]] %>% filter(placementid="0e42430f825c80036fd1b0a06f6425b9")) +
geom_line(aes(x=date,y=serv_ratio_global,color=nondescript_chain)) +
geom_line(aes(x=date,y=serv_ratio_mobile,color=nondescript_chain)) +
coord_cartesian(ylim=c(0,2))
p4 <- ggplot(a[[1]] %>% filter(PlacementId="0e42430f825c80036fd1b0a06f6425b9")) +
geom_line(aes(x=date,y=serv_ratio_global,color=nondescript_chain)) +
geom_line(aes(x=date,y=serv_ratio_mobile,color=nondescript_chain)) +
coord_cartesian(ylim=c(0,2))
p4 <- ggplot(a[[1]] %>% filter(PlacementId=="0e42430f825c80036fd1b0a06f6425b9")) +
geom_line(aes(x=date,y=serv_ratio_global,color=nondescript_chain)) +
geom_line(aes(x=date,y=serv_ratio_mobile,color=nondescript_chain)) +
coord_cartesian(ylim=c(0,2))
p4 <- ggplot(a[[1]] %>% filter(placement_id=="0e42430f825c80036fd1b0a06f6425b9")) +
geom_line(aes(x=date,y=serv_ratio_global,color=nondescript_chain)) +
geom_line(aes(x=date,y=serv_ratio_mobile,color=nondescript_chain)) +
coord_cartesian(ylim=c(0,2))
p4
currdir
DF <- read.csv(paste0(currdir,'experiment_data_aggregated.csv'))
?lag
?ddply
source('C:/Shahar/Projects/LostImpressions/session6.R')
a<-session6(DF)
View(a)
ggplot(a) + geom_point(aes(x=mobile_kfill,y=mobile_fill)) + facet_wrap(~placement_id)
ggplot(a,aes(x=mobile_kfill,y=mobile_fill)) + geom_point() + geom_smooth() + facet_wrap(~placement_id)
?geom_smooth
ggplot(a,aes(x=mobile_kfill,y=mobile_fill)) + geom_point() + geom_smooth(method="lm") + facet_wrap(~placement_id)
source('C:/Shahar/Projects/LostImpressions/session6.R')
session6Plots(a)
p1<-session6Plots(a)
print(p1)
source('C:/Shahar/Projects/LostImpressions/session6.R')
p1<-session6Plots(a)
print(p1)
?lm
?adply
?dlply
?lm
mk_model <- dlply(a, "placement_id", function(df) lm(mobile_fill~ mobile_kfill, df))
!t
!T
s <- a %>% filter(!(placement_id %in% c("203047dd1929e08684f45771d064466c", "5af6afe59f7bbb77b82fff5d388f8073")))
nrow(s)
nrow(a)
source('C:/Shahar/Projects/LostImpressions/session6.R')
a <- runSession6()
a <- read.csv(paste0(currdir,'experiment_data_aggregated.csv'))
nrow(a)
a <- session6(a)
nrow(a)
s <- session6Plots(a)
nrow(s)
length(s)
s
names(s)
source('C:/Shahar/Projects/LostImpressions/session6.R')
s <- session6Plots(a)
coefficients(s)
lapply(s,coefficients)
lapply(s,residuals)
class(lapply(s,residuals))
unlist(lapply(s,residuals))
class(unlist(lapply(s,residuals)))
length(unlist(lapply(s,residuals)))
names(unlist(lapply(s,residuals)))
?lapply
class(lapply(s,residuals,simplify=T)))
class(lapply(s,residuals,simplify=T))
class(lapply(s,residuals,simplify=F))
class(unlist(lapply(s,residuals,simplify=F)))
v1=unlist(lapply(s,residuals))
v2=unlist(lapply(s,fitted.values))
nrows(s)
nrows(a)
nrow(a)
a$check <- v1+v2
a <- a %>% filter(!(placement_id %in% c("203047dd1929e08684f45771d064466c", "5af6afe59f7bbb77b82fff5d388f8073")))
a$check <- v1+v2
source('C:/Shahar/Projects/LostImpressions/session6.R')
a <- runSession6()
source('C:/Shahar/Projects/LostImpressions/session6.R')
a <- runSession6()
View(a)
source('C:/Shahar/Projects/LostImpressions/session6.R')
debugSource('C:/Shahar/Projects/LostImpressions/session6.R')
a <- runSession6()
View(DF)
View(a)
source('C:/Shahar/Projects/LostImpressions/session6.R')
s
coefficients(s)
lapply(s,coefficients)
b=lapply(s,coefficients)
length(b)
b[1]
source('C:/Shahar/Projects/LostImpressions/session6.R')
debugSource('C:/Shahar/Projects/LostImpressions/session6.R')
a <- session6Plots()
a <- session6Plots(a)
debugSource('C:/Shahar/Projects/LostImpressions/session6.R')
a <- session6Plots(a)
p2
p2+geom_abline()
p1
p2
p2+geom_abline()
source('C:/Shahar/Projects/LostImpressions/session6.R')
?n
n(c=(1,2,3))
n(c(1,2,3))
?dense_rank
?approxfun
source('C:/Shahar/Projects/LostImpressions/session6.R')
a <- runSession6()
debugSource('C:/Shahar/Projects/LostImpressions/session6.R')
a <- runSession6()
debugSource('C:/Shahar/Projects/LostImpressions/session6.R')
a <- runSession6()
x <- c(5, 1, 3, 2, 2, NA)
row_number(x)
min_rank(x)
dense_rank(x)
source('C:/Shahar/Projects/LostImpressions/session6.R')
debugSource('C:/Shahar/Projects/LostImpressions/session6.R')
a <- runSession6()
pieces
class(pieces)
.fun
...
pieces[[1]]
.fun(pieces[[1]])
t<-.fun(pieces[[1]])
t
debugSource('C:/Shahar/Projects/LostImpressions/session6.R')
a <- runSession6()
t<-.fun(pieces[[1]])
class(t)
t
t<-pieces[[1]] %>% mutate (percent_rank(df$mk_rel_resid))
t
debugSource('C:/Shahar/Projects/LostImpressions/session6.R')
df
debugSource('C:/Shahar/Projects/LostImpressions/session6.R')
