m[2]
m <- tapply(y$col2,y$col1,identity)
m
unlist(m)
class(m)
class(unlist(m))
nrow(unlist(m))
length(unlist(m))
as.vector(m)
y<- read.csv("test.csv")
y
m <- tapply(y$col2,y$col1,identity)
m
unlist(m)
m$k
?tapply
names(m)
data.frame(col1=names(m),col2=m)
y
y[col1="a","col3"]=m[,"a"]
m
m["a"]
class(m["a"])
unlist(m["a"])
class(unlist(m["a"]))
y[col1="a","col3"]=unlist(m[,"a"])
y[col1="a","col3"]=unlist(m["a"])
y[col1=="a","col3"]=unlist(m["a"])
y["col1"=="a","col3"]=unlist(m["a"])
y["col1"=="a","col3"]=m["a"]
y["col1"=="a","col3"]
y["col1"=="a","col2"]
y["col1"=="a",]
y
y["col1"]
y["col1"]=="a"
y[y["col1"]=="a","col3"]=m["a"]
y
names(m)
source('C:/Shahar/Projects/LostImpressions/session2.R')
?arrange
y["col3"]=m
y["col3"]=unlist(m)
unlist(m)
names(unlist(m))
source('C:/Shahar/Projects/LostImpressions/session2.R')
testMain()
source('C:/Shahar/Projects/LostImpressions/session2.R')
testMain()
source('C:/Shahar/Projects/LostImpressions/session2.R')
testMain()
source('C:/Shahar/Projects/LostImpressions/session2.R')
testMain()
source('C:/Shahar/Projects/LostImpressions/session2.R')
debugSource('C:/Shahar/Projects/LostImpressions/session2.R')
testMain()
a$ix[(e-nHighest+1):e]
a$x[(e-nHighest+1):e]
a$x
vec[a$ix[1:nLowest]]
vec[a$ix[(e-nHighest+1):e]]
debugSource('C:/Shahar/Projects/LostImpressions/session2.R')
vec
vec[a$ix[1:nLowest]]
min(vec)
vec[a$ix[(e-nHighest+1):e]]
max(vec)
mean(vec)
mean(vec,rm.na=TRUE)
mean(vec,na.rm=TRUE)
source('C:/Shahar/Projects/LostImpressions/session2.R')
C
source('C:/Shahar/Projects/LostImpressions/session2.R')
testMain()
source('C:/Shahar/Projects/LostImpressions/session2.R')
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain()
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain()
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain()
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain()
DF <- main("lost_imps_by_day.csv", "pred_lost.csv", "placement_id", "rel_lost", "pred_lost", "pred_err",W=14)
DF %>% mutate(pred_served = komoona_served/(1-pred_lost))
DF %>% mutate(pred_fill = pred_served/impressions)
a <- DF %>% mutate(pred_served = komoona_served/(1-pred_lost), pred_fill = pred_served/impressions)
a <- DF %>% mutate(pred_served = komoona_served/(1-pred_lost), pred_fill = pred_served/impressions, fill_rel_error = pred_fill/rel_fill - 1)
is.factor(DF$pred_fill)
is.factor(DF$impressions)
is.factor(DF$rel_fill)
levels(DF$rel_fill)
as.numeric(DF$rel_fill)
y<-read.csv("lost_imps_by_day.csv")
is.factor(y$rel_fill)
levels(y$rel_fill)
match("#DIV/0!",y$rel_fill)
y<-read.csv("lost_imps_by_day.csv")
is.factor(y$rel_fill)
is.numeric(y$rel_fill)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain()
source('C:/Shahar/Projects/LostImpressions/session3.R')
length(numeric(0))
nrow(numeric(0))
numeric(0)==numeric(0)
data.frame()
nrow(data.frame())
source('C:/Shahar/Projects/LostImpressions/session3.R')
nrow(DF)
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
?geom_density
geom_density()
geom_density
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
warnings()
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
DF1 <- addComparisonColumns(DF)
is.factor(df.pred_fill)
is.factor(df$pred_fill)
is.factor(DF$pred_fill)
is.factor(DF$rel_fill)
DF <- main("lost_imps_by_day.csv", "pred_lost.csv", "placement_id", "rel_lost", "pred_lost", "pred_err",W=14)
is.factor(DF$rel_fill)
DF1 <- addComparisonColumns(DF)
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
warnings()
?diff
diff.zoo
?diff.zoo
source('C:/Shahar/Projects/LostImpressions/session2.R')
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain(DF)
runMain()
source('C:/Shahar/Projects/LostImpressions/session2.R')
runMain()
x<-runif(50)
y<-diff.zoo(x,na.pad=TRUE)
library(zoo)
diff.zoo
zoo.diff
zoo::diff
diff
?lag
?zoo::lag.zoo
lag.zoo
library(zoo)
lag.zoo
diff(zoo(x))
diff(zoo(x),na.pad=T)
source('C:/Shahar/Projects/LostImpressions/session2.R')
runMain()
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain()
?geom_vline
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain()
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain()
testMain()
source('C:/Shahar/Projects/LostImpressions/session2.R')
testMain()
runMain()
source('C:/Shahar/Projects/LostImpressions/session3.R')
runMain()
?aggregate
?ddply
?rollapply
?ddply
?select
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
rawDF %>% select(placement_id, date, impressions, served)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
View(a)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
View(a)
install.packages("plyr", type = "source")
version()
ver()
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
print()
print("")
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
warnings()
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
?data.frame
c("a",1)
list("a",1)
data.frame(list("a",1))
source('C:/Shahar/Projects/LostImpressions/session4.R')
?lm
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
?coef
?lm
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
m
m[1]
m$coefficients[1]
m$coefficients[2]
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
source('C:/Shahar/Projects/LostImpressions/session4.R')
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
b <- session4(rawDF)
View(b)
source('C:/Shahar/Projects/LostImpressions/session4.R')
b <- session4(rawDF)
class("2015-10-01")
as.Date("2015-10-01")
class(as.Date("2015-10-01"))
as.Date("2015-10-01")+35
"2015-10-01"+35
source('C:/Shahar/Projects/LostImpressions/session4.R')
df3 <- session4(rawDF)
?dddply
source('C:/Shahar/Projects/LostImpressions/session4.R')
df3 <- session4(rawDF)
p2 <- ggplot(df3) +
geom_hist(aes(x=resid_served,y=..scaled..),color="red", alpha=0.5) +
geom_hist(aes(x=resid2_served,y=..scaled..),color="blue", alpha=0.5)
source('C:/Shahar/Projects/LostImpressions/session4.R')
df3 <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
df3 <- session4(rawDF)
View(df3)
write.csv(df3,"df3.csv")
source('C:/Shahar/Projects/LostImpressions/session4.R')
write.csv(df3,"df3.csv")
df3 <- session4(rawDF)
write.csv(df3,"df3.csv")
source('C:/Shahar/Projects/LostImpressions/session4.R')
write.csv(df3,"df3.csv")
df3 <- session4(rawDF)
write.csv(df3,"df3.csv")
source('C:/Shahar/Projects/LostImpressions/session4.R')
?join
source('C:/Shahar/Projects/LostImpressions/session4.R')
c("A","B")[2]
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
?ddply
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
View(DF)
nrow(DF$smooth_served - DF$served)
nrow(DF$smooth_served)
paste("A","B")
paste("A","B",sep="")
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
nrow(DF$smooth_served - DF$served)
nrow(DF$smooth_served)
names(DF)
nrow(DF)
nrow(DF[,"smooth_served"])
nrow(DF[,"placement_id"])
nrow(DF[,"date"])
length(DF[,"date"])
length(DF[,"smooth_served"])
DF$served_resid <- DF$smooth_served - DF$served
?rename
?setNames
setNames("A","B")
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
session4(rawDF)
View(DF)
DF <- DF %>% select(-placement_id.y)
View(DF)
debugSource('C:/Shahar/Projects/LostImpressions/session4.R')
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
a[[3]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
write.csv(a[[4]],"df3.csv")
a[[4]]
write.csv("df3.csv",a[[4]],)
write.csv("df3.csv",a[[4]])
?write.csv
write.csv(a[[4]],"df3.csv")
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
a[[3]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
DF
df <- a[[4]]
names(df)
class(df$date)
max(df$date)
df$dateDiff <- max(df$date)-df$date
head(df$dateDiff)
p1 <- ggplot(DF, aes(x=kserved_resid, y=served_resid, color=dateDiff)) +
geom_point() +
facet_wrap(~placement_id,scale="free") +
geom_smooth(method='lm',formula=y~x + 0, na.rm=T)
p[1]
p1
ggplot(df, aes(x=kserved_resid, y=served_resid, color=dateDiff)) +
geom_point() +
facet_wrap(~placement_id,scale="free") +
geom_smooth(method='lm',formula=y~x + 0, na.rm=T)
ggplot(df, aes(x=kserved_resid, y=served_resid, color=as.numeric(dateDiff))) +
geom_point() +
facet_wrap(~placement_id,scale="free") +
geom_smooth(method='lm',formula=y~x + 0, na.rm=T)
p1 <- ggplot(DF, aes(x=kserved_resid/impressions, y=served_resid/impressions, color=as.factor(period))) +
geom_point() +
facet_wrap(~placement_id,scale="free") +
geom_smooth(method='lm',formula=y~x + 0, na.rm=T)
p1
ggplot(df, aes(x=kserved_resid/impressions, y=served_resid/impressions, color=as.numeric(dateDiff))) +
geom_point() +
facet_wrap(~placement_id,scale="free") +
geom_smooth(method='lm',formula=y~x + 0, na.rm=T)
head(df)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
df <- a[[4]]
head(df)
source('C:/Shahar/Projects/LostImpressions/session4.R')
df <- a[[4]]
a <- session4(rawDF)
df <- a[[4]]
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
a[[3]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
?geom_abline
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
df <- a[[4]]
View(df)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
log(2)
log(exp(1))
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
a[[1]]
a[[2]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
a <- session4(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[1]]
source('C:/Shahar/Projects/LostImpressions/session4.R')
a <- session4(rawDF)
a[[2]]
a[[2]] + xlim(-1,1)
names(rawDF)
?write.csv
isempty("")
?empty
""==""
""==NA
""=="Ab"
ave(c(4,4,4,5,6,6,7,7,))
ave(c(4,4,4,5,6,6,7,7,4))
ave(c(4,4,4,5,6,6,7,7,4))[1]
?Ave
?ave
mean(c(4,4,4,5,6,6,7,7,4))
source('C:/Shahar/Projects/LostImpressions/session5.R')
source('C:/Shahar/Projects/LostImpressions/session4.R')
source('C:/Shahar/Projects/LostImpressions/session5.R')
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
rawDF <- read.csv(paste(currdir,'kettle_placement_data_with_komoona_served.csv',sep=""))
View(rawDF)
source('C:/Shahar/Projects/LostImpressions/session4.R')
runSession4()
rawDF <- read.csv(paste(currdir,'sample_placement_data_with_komoona_served.csv',sep=""))
View(rawDF)
runSession4()
View(rawDF)
runSession4()
names(DF)
runSession4()
names(DF)
runSession4()
names(DF %>% select(placement_id, date, impressions, served, kserved=komoona_served, komooona_fill=komoona_served/impressions))
names(DF %>% select(placement_id)) #, date, impressions, served, kserved=komoona_served, komooona_fill=komoona_served/impressions))
names(DF %>% select(placement_id, date, impressions, served, kserved=komoona_served ))#, komooona_fill=komoona_served/impressions))
names(DF %>% select(placement_id, date, impressions, served, kserved=komoona_served , komooona_fill=komoona_served/impressions))
names(DF %>% select(kserved=komoona_served , komooona_fill=komoona_served/impressions))
names(DF %>% select(kserved=komoona_served , komooona_fill=komoona_served/impressions, placement_id))
