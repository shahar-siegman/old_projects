source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
as.character(4)
as.character("1234")
rawDF <- readInput()
?subset
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
View(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
character(5)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
a<-extractOptimizationGoal(rawDF)
getValueByDate(rawDF$performance_date[i], rawDF$optimizationGoal[i], rawDF$goalChangeDate[i], as.character)
rawDF$performance_date[i]
rawDF$optimizationGoal[i]
rawDF$optimizationGoal[1]
rawDF$optimizationGoal[2]
rawDF$optimizationGoal[3]
head(rawDF$optimizationGoal)
names(rawDF)
head(rawDF$optimization_goal)
getValueByDate(rawDF$performance_date[i], rawDF$optimization_goal[i], rawDF$goal_change_date[i], as.character)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
a<-extractOptimizationGoal(rawDF)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
a<-extractOptimizationGoal(rawDF)
head(a)
tail(a)
View(a)
a
which(is.na(a))
mydata <- extractFromChangeColumns(rawDF)
View(mydata)
plots()
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
unique(mydata$optimizationGoal)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
sum(mydata$optimizationGoal=="A" & mydata$ecpmSlack>0.15 )
?sum
sum(mydata$optimizationGoal=="A" & mydata$ecpmSlack>0.15 , na.rm=TRUE)
sum(mydata$optimizationGoal=="A" , na.rm=TRUE)
6426/22493
sum(mydata$optimizationGoal=="b" , na.rm=TRUE)
sum(mydata$optimizationGoal=="B" , na.rm=TRUE)
sum(mydata$optimizationGoal=="B" & mydata$ecpmSlack>0.15 , na.rm=TRUE)
1449/3744
?transmute
data %>% mutate(highSlack=ecpm_slack > 0.15)
library(dplyr)
data %>% mutate(highSlack=ecpm_slack > 0.15)
mydata %>% mutate(highSlack=ecpm_slack > 0.15)
mydata %>% mutate(highSlack=ecpmSlack > 0.15)
?group_by
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(optimizationGoal,highSlack) %>% summarise(count)
?summarise
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(optimizationGoal,highSlack) %>% summarise(count(optimizationGoal)
)
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),highSlack) %>% summarise(count(optimizationGoal))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(count(optimizationGoal))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(sum(1)))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(sum(1))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(count(1))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
?geom_histogram
?between
mydata %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
mydata %>% filter(meaningfulImpressions & meaningfulFloorPrice & !is.na(optimizationGoal)) %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
library(dplyr)
mydata %>% filter(meaningfulImpressions & meaningfulFloorPrice & !is.na(optimizationGoal)) %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
mydata %>% filter(meaningfulImpressions & meaningfulFloorPrice & !is.na(optimizationGoal) & isOptimized==1) %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
install.packages("Hmisc")
library(Hmisc)
?wtd.quantile
?quantile
seq(0.1,1)
seq(0.1,0.2,1)
seq(0.1,1,0.2)
?dplytr::quantile
?dplyr::quantile
?dplyr::summarize
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots()
plots(mydata)
View(mydata)
?quanitle
?quantile
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
mydata(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack))
mydata %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)
quantile(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack), probs=seq(0.1, 1, 0.1) )
names(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack))
head(as.vector(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)))
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
v<-mydata %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)
class(v)
names(v)
nrow(v)
qunatile(v,0.5)
quantile(v,0.5)
quantile(v$ecpmSlack,0.5)
quantile(as.vector(v),0.5)
quantile(unlist(v),0.5)
quantile(v,0.5)
class(unlist(v))
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
?for
{}
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
rawDF<-readInput()
mydata <- extractFromChangeColumns(rawDF)
rawDF =
1
rawDF =
rawDF = 1
1
rawDF<-readInput()
mydata <- extractFromChangeColumns(rawDF)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(data)
plots(mydata)
nrow(mydata)
nrow(data2)
nrow(subset(data2, ecpmSlack >0.15))
nrow(subset(data2, goalType=="B", ecpmSlack >0.15))
nrow(subset(data2, goalType=="B"& ecpmSlack >0.15))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.15))
nrow(subset(data2, optimizationGoal=="B"))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.25))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.35))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.3))
nrow(subset(data2, optimizationGoal=="A+"& ecpmSlack >0.3))
nrow(subset(data2, optimizationGoal=="A"& ecpmSlack >0.081))
3357/11187
g
install.packages("outliers")
?dlply
??dlply
source('C:/Shahar/Projects/LostImpressions/session1.R')
rawDF <- loadData()
getwd
getwd()
setwd("C:/Shahar/Projects/LostImpressions")
getwd()
source('C:/Shahar/Projects/LostImpressions/session1.R')
rawDF <- loadData()
names(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
outl=outlierDetect(rawDF)
chisq.out.test(rawDF$rel_lost[rawDF$placement_id=="33b92f9e6582d6b79dbe9fceb37c596f
"])
chisq.out.test(rawDF$rel_lost[rawDF$placement_id=="33b92f9e6582d6b79dbe9fceb37c596f"])
a=chisq.out.test(rawDF$rel_lost[rawDF$placement_id=="33b92f9e6582d6b79dbe9fceb37c596f"])
a
class(a)
as.boolean(a)
a$p.value
source('C:/Shahar/Projects/LostImpressions/session1.R')
outl=outlierDetect(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
outl=outlierDetect(rawDF)
chisq.out.test(vec)
a$p.value
chisq.out.test(vec)
vec
complete.cases(vec)
is.na(vec)
sum(!is.na(vec))
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
q
outl=outlierDetect(rawDF)
outl
class(outl)
names(outl)
p["22ebbcc01c64763f35aa9eb96831934f"]
outl["22ebbcc01c64763f35aa9eb96831934f"]
?match
match(C(FALSE,FALSE,TRUE))
match(c(FALSE,FALSE,TRUE))
match(TRUE,c(FALSE,FALSE,TRUE))
match(1,c(FALSE,FALSE,TRUE))
match(0,c(FALSE,FALSE,TRUE))
match(0,c(1,2,3))
v=randu(5)
v=runif(5)
v
chisq.out.test(v)
c(v,NA,NA)
c(v,NA,NA,NA)
chisq.out.test(c(v,NA,NA,NA))
?tapply
tapply(rawDF$rel_lost, rawDF$placement_id, NULL)
?ident
tapply(rawDF$rel_lost, rawDF$placement_id, identity)
?for
()
source('C:/Shahar/Projects/LostImpressions/session1.R')
v <- outlierDetect(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
v <- outlierDetect(rawDF)
View(v)
class(v)
source('C:/Shahar/Projects/LostImpressions/session1.R')
v <- outlierDetect(rawDF)
View(v)
source('C:/Shahar/Projects/LostImpressions/session1.R')
v <- multiOutlierFilter(rawDF$placement_id,rawDF$rel_lost)
source('C:/Shahar/Projects/LostImpressions/session1.R')
v <- multiOutlierFilter(rawDF$placement_id,rawDF$rel_lost)
source('C:/Shahar/Projects/LostImpressions/session1.R')
?week
??weekdays
?floor
as.Date('2015-08-01')
difftime(as.Date('2015-08-01'),as.Date('2015-07-01'))
difftime(as.Date('2015-08-01'),as.Date('2015-07-01'),units="days")
as.numeric(difftime(as.Date('2015-08-01'),as.Date('2015-07-01'),units="days"))
?var
source('C:/Shahar/Projects/LostImpressions/session1.R')
stats <- mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
stats <- mainAnalysis(rawDF)
stats
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
stats
stats <- mainAnalysis(rawDF)
View(rawDF)
as.Date(rawDF$date,format="%M/%D/%Y")
as.Date(rawDF$date,format="M/D/Y")
?as.Date
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
stats <- mainAnalysis(rawDF)
View(rawDF)
difftime(as.Date(rawDF$date,format="%m/%d/%y"),as.Date("2015-08-01"))
difftime(as.Date(rawDF$date,format="%m/%d/%y"),as.Date("2015-08-01",format="%y-%m-%d"))
difftime(as.Date(rawDF$date,format="%m/%d/%y"),as.Date("8/1/15",format="%m/%d/%y"))
difftime(as.Date(rawDF$date,format="%m/%d/%y"),as.Date("8/1/15",format="%m/%d/%y"), units="days")
as.Date(rawDF$date,format="%m/%d/%y")
as.Date(rawDF$date,format="%m/%d/%Y")
as.Date("2015-08-01")
as.Date("2015-08-01")+1
as.Date("2015-08-01")+31
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
stats <- mainAnalysis(rawDF)
as.Date(rawDF$date,format="%m/%d/%Y")
head(as.Date(rawDF$date,format="%m/%d/%Y"))
head(difftime(as.Date(rawDF$date,format="%m/%d/%Y"),as.Date("2015-08-01")))
head(difftime(as.Date(rawDF$date,format="%m/%d/%Y"),as.Date("2015-08-01"),units="days"))
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
stats <- mainAnalysis(rawDF)
head(difftime(as.Date("2015-08-01"),as.Date(rawDF$date,format="%m/%d/%Y"),units="days"))
head(difftime(as.Date(rawDF$date,format="%m/%d/%Y"),as.Date("2015-07-01"),units="days"))
head(difftime(as.Date(rawDF$date,format="%m/%d/%Y"),as.Date("2015-07-01"),units="days")/14)
head(difftime(as.Date(rawDF$date,format="%m/%d/%Y"),as.Date("2015-07-01"),units="days")/periodLength)
floor(head(difftime(as.Date(rawDF$date,format="%m/%d/%Y"),as.Date("2015-07-01"),units="days")/periodLength))
floor(difftime(as.Date(rawDF$date,format="%m/%d/%Y"),as.Date("2015-07-01"),units="days") / periodLength)
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
stats <- mainAnalysis(rawDF)
rawDF <- loadData()
View(rawDF)
stats <- mainAnalysis(rawDF)
View(rawDF)
?summarise
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
stats <- mainAnalysis(rawDF)
View(rawDF)
stats <- mainAnalysis(rawDF)
names(rawDF)
multiOutlierFilter(rawDF$placement_id,rawDF$rel_lost)
q
stats <- mainAnalysis(rawDF)
multiOutlierFilter(rawDF$placement_id,rawDF$rel_lost)
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
stats <- mainAnalysis(rawDF)
multiOutlierFilter(rawDF$placement_id,rawDF$rel_lost)
names(rawDF)
stats
?mean
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
source('C:/Shahar/Projects/LostImpressions/session1.R')
stats <- mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
stats
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
g <- ggplot(rawDF) + geom_boxplot(aes(x=periodNum, y=rel_lost)) + facet_wrap(placement_id)
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
?facet_wrap
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
mainAnalysis(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
?order
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
?std
?sd
source('C:/Shahar/Projects/LostImpressions/session1.R')
?sd
Analysis.Zscore(rawDF)
na
NA
NA/3
(NA-5)/3
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
max(subscripts)
vec
len
d
vec[d-minLength:d-1]
d
vec[(d-minLength):(d-1)]
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
m
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
s
vec[(d-minLength):(d-1)]
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
m
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
m
t
v[d]
d
v
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
vec[d]
vec
m
len
z
Analysis.Zscore(rawDF)
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
cls
Analysis.Zscore(rawDF)
reconstructed
warnings()
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
source('C:/Shahar/Projects/LostImpressions/session1.R')
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
z
sum(subscrits==i)
sum(subscripts==i)
vec
d
len
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
z
sum(subscripts==i)
match(subscritps==i)
?match(subscripts==i)
match(TRUE,subscripts==i)
vec
len
z
m
t
sum(subscripts==i)
length(z)
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
len
minLength
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
z
subscripts==i
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
reconstructed
Analysis.Zscore(rawDF)
reconstructed
n
Analysis.Zscore(rawDF)
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
View(rawDF)
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
ggplot(rawDF) + geom_line(aes(x=date,y=zScore)) + facet_wrap(~as.factor(placement_id))
ggplot(rawDF) + geom_line(aes(x=date,y=zScore)) + facet_wrap(~placement_id)
as.facto(rawDF$placement_id)
as.factor(rawDF$placement_id)
ggplot(rawDF) + geom_line(aes(x=date,y=zScore))
ggplot(rawDF) + geom_line(aes(x=date,y=zScore),color=placement_id)
ggplot(rawDF) + geom_line(aes(x=date,y=zScore,color=placement_id))
ggplot(rawDF) + geom_line(aes(y=zScore,color=placement_id))
ggplot(rawDF) + geom_path(aes(y=zScore,color=placement_id))
ggplot(rawDF) + geom_path(aes(x=1,y=zScore,color=placement_id))
ggplot(rawDF) + geom_path(aes(x=date,y=zScore,color=placement_id))
?plot
plot(1:57,rawDF$zScore[1:57])
plot(1:57,rawDF$zScore[1:57],type="l")
a=rawDF[1:57,]
viewA
View(a)
ggplot(a)+geom_path(x=date,y=zScore)
ggplot(a)+geom_line(x=date,y=zScore)
a
date
a$dt=a$date
ggplot(a)+geom_line(x=dt,y=zScore)
ggplot(a)
ggplot(a)+geom_line(aes(x=dt,y=zScore))
ggplot(a)+geom_line(aes(x=as.facotr(dt),y=zScore))
ggplot(a)+geom_line(aes(x=as.factor(dt),y=zScore))
ggplot(a)+geom_line(aes(x=1:57,y=zScore))
ggplot(a)+geom_line(aes(x=dt,y=zScore))+scale_x_date()
a$dt <- as.Date(a$dt,format="%m/%d/%Y")
ggplot(a)+geom_line(aes(x=dt,y=zScore))+scale_x_date()
debugSource('C:/Shahar/Projects/LostImpressions/session1.R')
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
a <- numeric(10)
a <- NA
a
NA*0
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
warnings()
?geom_density
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
source('C:/Shahar/Projects/LostImpressions/session1.R')
Analysis.Zscore(rawDF)
