ggplot(f5)+geom_line(aes(x=rownames(f5),y=vectors.1))
ggplot(f5)+geom_line(aes(x=rownames(f5),y=vectors.1,group=1))
?melt
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
f5 %>% melt() %>% View()
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
ggplot(f5 %>% filter(variable %in% c("vectors.1","vectors.2","vectors.3", "vectors.4"))) + geom_line(aes(x=tag_code,y=value,group=variable))
ggplot(f5 %>% filter(variable %in% c("vectors.1","vectors.2","vectors.3", "vectors.4"))) + geom_line(aes(x=tag_code,y=value,group=variable,colour=variable))
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf2
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
class(f2)
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
f2 %>% ungroup() %>% filter(date %in% c('2016-07-06','2016-07-09','2016-07-12'), tag_network=="e") %>% arrange(date,tag_ecpm) %>% View()
f2 %>% ungroup() %>% filter(date %in% as.Date(c('2016-07-06','2016-07-09','2016-07-12')), tag_network=="e") %>% arrange(date,tag_ecpm) %>% View()
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
p[[9]]
p[[10]]
data.frame(pid=levels(a$placement_id)) %>% View()
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
View(f4)
class(f5)
class(f4)
rowSums(is.na(f))>0
sum(is.na(f4[1,]))
sum(is.na(f4[6,]))
sum(is.na(f4[16,]))
sum(is.na(f4[15,]))
sum(is.na(f4[,15]))
nrow(f4)
seq(5,1,-1)
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
ncol(f4)
pf1
pf2
pf4
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
?matmult
f4[1,] %*% f4[,1]
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf4
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
f2a
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
pf4
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf4
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf4
pf2
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf2
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf2
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
min(f2$date)
min(f2$date) + c(0,3,6)
View(f2a)
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf5
pf2
source('C:/Shahar/Projects/sandbox/inquistr august/session3.R')
pf2
pf3
p[[1]]
p[[10]]
p[[30]]
p[[29]]
p[[28]]
p[[27]]
p[[26]]
p[[25]]
p[[24]]
p[[23]]
p[[22]]
class(a5)
?stringr
?substring
??stringr
?str_locate
str_locate("e4:e19:e22","e19")
w<-str_locate("e4:e19:e22","e19")
class(W)
class(w)
str_locate("e4:e19:e22","e19")[1]
substr(e4:e19:e22",1,3)
substr("e4:e19:e22",1,3)
?rank
?dplyr::ranking
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
names(a1)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
names(a1)
View(a5)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
View(a5)
str_locate("e23:e21",":")[1]-1
View(a0)
str_locate(head(a0$chain_codes),":")
head(a0)
nrow(a)
head(a)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
head(a)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
head(a)
str_locate(head(a$chain_codes),":")
str_locate(head(a$chain_codes),":")[1]
?str_locate
str_locate(head(a$chain_codes),":")[,1]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
View(a0)
substr("abcdef",1,na)
substr("abcdef",1,NA)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
names(a2)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
names(a5)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
View(a3)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
bl[[1]]
View(bl[[1]])
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
unique(a3$date)
class(bl[[1]]$date)
class(a3$date)
b1 %>% filter(placement_id=="03932d66637d396843a00d741fd3808c", date %in% unique(a3$date))
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
?Aes
?aes
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
as.Date('2016-08-01')+1:5
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
class(a2$date)
data.frame(date=a3$date, is_in= date %in% as.Date("2016-08-01")+0:5) %>% View()
data.frame(date=a3$date, is_in= date %in% (as.Date("2016-08-01")+0:5)) %>% View()
data.frame(date=a3$date, is_in= a3$date %in% (as.Date("2016-08-01")+0:5)) %>% View()
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[2]]
p[[3]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[3]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[3]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[3]]
p[[1]]
data.frame(pid=levels(a$placement_id)) %>% View()
a6 %>% filter(placement_id=="03932d66637d396843a00d741fd3808c",
is_leading_chain,
date %in% (as.Date("2016-08-01")+0:5),
chain_length>2) %>% View()
a6 %>% filter(placement_id=="03932d66637d396843a00d741fd3808c",
is_leading_chain,
date %in% (as.Date("2016-08-01")+0:5),
chain_length>2) %>% select(-impressions,-tag_served,-week) %>% View()
a6 %>% filter(placement_id=="03932d66637d396843a00d741fd3808c",
is_leading_chain,
date %in% (as.Date("2016-08-01")+0:5),
chain_length>2,place==chain_length) %>% select(-impressions,-tag_served,-week) %>% View()
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
class(a3$chain_length)
class(a3$place)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
p[[30]]
bl[[30]] %>% View()
a3 %>% View()
bl[[30]] %>% View()
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
geom_abline
GeomAbline
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
class(bl[[1]])
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
class(bl[[1]])
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
max(a3$chain_cum_fill)
bl[[1]]$floor_price[1]
class(bl[[1]]$floor_price)
class(b1$floor_price)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
pl[[1]]
p[[1]]
round(1.24356,2)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
class(a3$chain_cum_fill)
class(a3$chain_cum_rcpm)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
?sprintf
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
p[[2]]
p[[3]]
0.4^(2/3)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
?linetype
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
p[[2]]
p[[3]]
p[[4]]
p[[5]]
p[[6]]
p[[7]]
p[[1]]
p[[7]]
p[[6]]
p[[5]]
p[[1]]
p[[3]]
source('C:/Shahar/Projects/sandbox/inquistr august/session4.R')
View(a9)
source('C:/Shahar/Projects/sandbox/inquistr august/session4.R')
class(b1$placement_id)
class(a7$placement_id)
source('C:/Shahar/Projects/sandbox/inquistr august/session4.R')
source('C:/Shahar/Projects/sandbox/inquistr august/session4.R', echo=TRUE)
source('C:/Shahar/Projects/sandbox/inquistr august/session4.R')
class(a9$floor_price)
class(a9$chain_ecpm)
a9$floor_price[18]
a9$ecpm[18]
a9$chain_ecpm[18]
a9$chain_ecpm[18] < a9$floor_price[18]
a9$chain_allocation>0.1
a9$chain_allocation[18]>0.1
a9 %>% filter(chain_allocation>0.1, chain_ecpm<floor_price+0.4 ) %>% View()
a9 %>% filter(chain_allocation>0.1, chain_ecpm<floor_price+0.05 ) %>% View()
a9 %>% filter(chain_allocation>0.1, chain_ecpm<floor_price) %>% View()
source('C:/Shahar/Projects/sandbox/inquistr august/session4.R')
sum(a9$loss)
sum(a9 %>% filter(day_num==1) %>% `[[`("loss"))
source('C:/Shahar/Projects/sandbox/inquistr august/session4.R')
write.csv(a9,"inquistr_chains_below_floor_report.csv")
a10 <- a8 %>% mutate(chain_ecpm=chain_cum_rcpm/chain_cum_fill)  %>%
filter(chain_allocation>0.1, chain_ecpm>floor_price )
sum(a10  %>% mutate(rev=impressions*(chain_ecpm-floor_price)/1000) %>% `[[`("rev"))
a10 <- a10 %>% mutate(rev=impressions*(chain_ecpm-floor_price)/1000)
View(a10)
source('C:/Shahar/Projects/sandbox/inquistr august/session4.R')
sum(a9$loss)
a10 <- a10 %>% mutate(rev=impressions*chain_cum_fill*(chain_ecpm-floor_price)/1000)
sum(a10$rev)
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
rm(list=ls())
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
p[[2]]
p[[3]]
p[[4]]
p[[5]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
warnings()
max(a3$chain_cum_fill)
class(a3$chain_cum_fill)
max(a3$chain_cum_fill,na.rm=T)
cmax(a3$chain_cum_fill,na.rm=T)
rmax(a3$chain_cum_fill,na.rm=T)
maxc(a3$chain_cum_fill,na.rm=T)
?max
pmax(a3$chain_cum_fill,na.rm=T)
head(a3$chain_cum_fill,na.rm=T
)
head(a3$chain_cum_fill)
nrow(a3)
?Break
?break
?continue
source('C:/Shahar/Projects/sandbox/inquistr august/session1.R')
p[[1]]
p[[2]]
p[[3]]
p[[4]]
p[[2]]
p[[6]]
p[[5]]
p[[6]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
update.packages(ask=FALSE, checkBuilt = TRUE)
install.packages(plyr)
install.packages('plyr')
install.packages('dplyr')
install.packages('zoo')
install.packages('ggplot2')
install.packages('reshape2')
install.packages('stringr')
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
llply(names(a),class)
names(a)
laply(a,class)
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
laply(a6,class)
saply(a,class)
slaply(a,class)
llaply(a,class)
laply(a,class)
names(a)
class(a6)
class(a2)
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
View(a2)
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
p[[1]]
p[[2]]
p[[1]]
levels(a2$placement_id)
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
p[[1]]
x11();p[[1]];x(11);q[[1]]
x11();p[[1]];x11();q[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
max_chain_cum_fill
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
p[[1]]
max_chain_cum_fill*0.8
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
p[[1]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
p[[1]];x11();q[[1]]
p[[2]];x11();q[[2]]
p[[1]]+coord_cartesian(xlim=c(0,1),ylim=c(0,2));x11();q[[1]]
p[[2]]+coord_cartesian(xlim=c(0,1),ylim=c(0,2));x11();q[[2]]
p[[2]]+coord_cartesian(xlim=c(0,0.5),ylim=c(0,2));x11();q[[2]]
?x11()
p[[3]]
p[[3]];x11();q[[3]]
p[[4]];x11();q[[4]]
p[[5]];x11();q[[5]]
p[[3]];x11();q[[3]]
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
source('C:/Shahar/Projects/sandbox/inquistr august/draw_whatif.R')
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
whatif(a2.5,"371960ca1872757895184fc2a704e76a" )
whatif(a2.5 %>% filter(date in as.Date("2016-08-26")+0:3),"371960ca1872757895184fc2a704e76a" )
whatif(a2.5 %>% filter(date %in% as.Date("2016-08-26")+0:3),"371960ca1872757895184fc2a704e76a" )
whatif(a2.5 %>% filter(date %in% (as.Date("2016-08-26")+0:3),"371960ca1872757895184fc2a704e76a" )
whatif(a2.5 %>% filter(date %in% (as.Date("2016-08-26")+0:3)),"371960ca1872757895184fc2a704e76a" )
whatif(a2.5 %>% filter(date %in% (as.Date("2016-08-26")+0:3)),"6e353182dfb4514f2a7924953a0c4d70" )
whatif(a2.5 %>% filter(date %in% (as.Date("2016-08-26")+0:3)),"9ce0d38850bfa5349e46f90e4f46b5b7" )
whatif(a2.5 %>% filter(date %in% (as.Date("2016-08-26")+0:3)),"a28b4de4f73ba41337c87b1a4f739437" )
whatif(a2.5 %>% filter(date %in% (as.Date("2016-08-26")+0:3)),"f4046cd90b36b7fabb61a7c37b2bd933" )
View(a2.5)
names(a)
source('C:/Shahar/Projects/sandbox/inquistr august/draw_whatif.R')
whatif(a2.5 %>% filter(date %in% (as.Date("2016-09-31")+0:3)),,1 )
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
whatif(a2.5 %>% filter(date %in% (as.Date("2016-09-31")+0:3)),,1 )
whatif(a2.5 %>% filter(date %in% (as.Date("2016-09-31")+0:3)),,1)
nrow(a2.5)
whatif(a2.5,,1)
whatif(a2.5 %>% filter(date %in% (as.Date("2016-08-31")+0:3)),,1)
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
source('C:/Shahar/Projects/sandbox/inquistr august/draw_whatif.R')
whaif(a2.5,,3)
whatif(a2.5,,3)
whatif(a2.5,,4)
q[[4]]
class(q)
length(q)
whatif(a2.5 %>% filter(date >= as.Date("2016-09-1")),,4)
a2.5 %>% filter(placement_id="219affc912ba5f6782fcd9c96a268f06") %>% View()
a2.5 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06") %>% View()
a2.5 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06')) %>% View()
a2.5 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06'), chain_codes=="z1:p5:p6:z2") %>% View()
a2.5 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06')) %>% View()
a5 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06')) %>% View()
a0 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06')) %>% View()
a0 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06')) %>% View() %>% select(placement_id, chain_codes, date, impressions, house, place, tag_code, tag_impressions, imps_for_sumn)
a0 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06')) %>% select(placement_id, chain_codes, date, impressions, house, place, tag_code, tag_impressions, imps_for_sum) %>% View()
names(a2)
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
whatif(a2.5 %>% filter(date >= as.Date("2016-09-01")),,4)
a2.5 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06')) %>% View()
a2.5 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06'),tag_code=="z17") %>% View()
a2.5 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06'),tag_code=="z27") %>% View()
a2.5 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06'),tag_code=="z29") %>% View()
a2.5 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06')) %>% View()
whatif(a2.5 %>% filter(date >= as.Date("2016-09-01")),,5)
source('C:/Shahar/Projects/sandbox/inquistr august/draw_whatif.R')
whatif(a2.5 %>% filter(date >= as.Date("2016-09-01")),,5)
source('C:/Shahar/Projects/sandbox/inquistr august/draw_whatif.R')
whatif(a2.5 %>% filter(date >= as.Date("2016-09-01")),,5)
whatif(a2.5 %>% filter(date >= as.Date("2016-09-01")),,4)
a2.5 %>% filter(placement_id=="219affc912ba5f6782fcd9c96a268f06", date>=as.Date('2016-09-06')) %>% View()
whatif(a2.5 %>% filter(date >= as.Date("2016-09-01")),,1)
source('C:/Shahar/Projects/sandbox/inquistr august/session1_draw.R')
