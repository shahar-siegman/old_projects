loopFiles()
getwd()
source('C:/Shahar/Projects/IndexSSP/session1.R')
getwd()
setwd("C:/Shahar/Projects/IndexSSP")
loopFiles()
a<- list(NA,c("A","B"))
a
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
rep("a",5)
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
loopResults()
?grid.arrange
??grid.arrange
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
auctions <- list(firsts,seconds,nAuctions,trueFloorPrices)
resultByFloorPrice(auctions,0.1)
resultByFloorPrice(auctions,auctions[[4]])
trueFloorPrices <- trueFloorPrices[!recordsToRemove]
trueFloorPrices <- as.numeric(trueFloorPrices)
resultByFloorPrice(auctions,trueFloorPrices)
a=1:10
T
b=c(T,T,T,F,F,F,F)
a=1:7
a*B
a*
b
a*b
sum(a*b)
?attributes
a <- data.frame()
attributes(a) <- list(hello=5, dumb="abty")
a
a$x=1:10
a
mostattributes(a) <- list(hello=5, dumb="abty")
?data.frame
attributes(a)
attributes(a)$hello
a$hello
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
loopResults()
ggplot()+geom_line(data=df, aes(y=wins, x=floorPrice))+geom_point(data=df, aes(y=wins, x=floorPrice))
print ggplot()+geom_line(data=df, aes(y=wins, x=floorPrice))+geom_point(data=df, aes(y=wins, x=floorPrice))
print(ggplot()+geom_line(data=df, aes(y=wins, x=floorPrice))+geom_point(data=df, aes(y=wins, x=floorPrice)))
ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
p1<-ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
print(p1)
df
dev.off()
ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
plot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
plot(data=df, aes(y=wins, x=floorPrice))
plot(df$wins,df$revenue)
print(plot(df$wins,df$revenue))
b
ggplot2(data=b)+geo_point()
ggplot(data=b)+geo_point()
ggplot(data=as.data.frame(b) )+geo_point()
ggplot(data=as.data.frame(b) )+geom_point()
c=as.data.frame(b)
ggplot(data=c )+geom_point()
c
ggplot(data=p )+geom_point()
ggplot(data=p )+geom_point(aes(x=chainLength,y=linearPred))
ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
p <- ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
print(p)
p <- ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
library(ggplot2)
p <- ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
p <- ggplot(data=q )+geom_point(aes(x=ChainLength,y=linearPred))
print(p)
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
tail(df)
mean(auctions[[4]])
head(df)
df[15,]
df[60,]
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
tail(df)
loopFiles()
class(df)
loopFiles()
class(df)
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
class(df)
class(y)
nrow(y)
loopResults
loopResults()
class(df)
ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
p1
p1<-NA
p1<-ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
loopResults()
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
class(p1)
loopFiles()
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
loopResults()
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice, colors=floorPrice))+geom_line()+geom_point()
print(p1)
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice, fill=floorPriceType))+geom_line()+geom_point()
print(p1)
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))+geom_line()+geom_point()
print(p1)
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
fname="results/8aa7fb4e378bd004fcdbb00e918a5e16.csv"
df <- read.csv(fname)
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))+geom_line()f+geom_point()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))+geom_line()+geom_point()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,2))
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,1))
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,0.5))
loopResults()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,0.5))
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
print(p1)
print(p2)
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
?findInterval
?filter
?dplyr::filter
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
rawDF <- readInput()
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
View(mydata)
nrow(data)
nrow(mydata)
nrow(mydata %>% filter (impressions>1000))
nrow(mydata %>% filter (!is.na(floorPrice) && !is.na(isOptimized))
)
head(is.na(mydata$floorPrice))
which(is.na(mydata$floorPrice))
nrow(mydata %>% filter (!is.na(floorPrice) || !is.na(isOptimized))
)
nrow(mydata %>% filter (is.na(floorPrice) || is.na(isOptimized)))
nrow(mydata %>% filter(is.na(floorPrice) || is.na(isOptimized)))
floorPrice
nrow(mydata %>% filter(is.na(isOptimized)))
nrow(mydata %>% filter(!is.na(isOptimized)))
nrow(mydata %>% filter(!is.na(isOptimized)) %>% filter(!is.na(floorPrice)))
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
nrow(mydata %>% filter(is.na(floorPrice) & is.na(isOptimized)))
nrow(mydata %>% filter(!is.na(floorPrice) & !is.na(isOptimized)))
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata<-extractFromChangeColumns(rawDF)
View(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
as.character(4)
as.character("1234")
rawDF <- readInput()
?subset
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
View(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
character(5)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- extractFromChangeColumns(rawDF)
a<-extractOptimizationGoal(rawDF)
getValueByDate(rawDF$performance_date[i], rawDF$optimizationGoal[i], rawDF$goalChangeDate[i], as.character)
rawDF$performance_date[i]
rawDF$optimizationGoal[i]
rawDF$optimizationGoal[1]
rawDF$optimizationGoal[2]
rawDF$optimizationGoal[3]
head(rawDF$optimizationGoal)
names(rawDF)
head(rawDF$optimization_goal)
getValueByDate(rawDF$performance_date[i], rawDF$optimization_goal[i], rawDF$goal_change_date[i], as.character)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
a<-extractOptimizationGoal(rawDF)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
a<-extractOptimizationGoal(rawDF)
head(a)
tail(a)
View(a)
a
which(is.na(a))
mydata <- extractFromChangeColumns(rawDF)
View(mydata)
plots()
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
unique(mydata$optimizationGoal)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
sum(mydata$optimizationGoal=="A" & mydata$ecpmSlack>0.15 )
?sum
sum(mydata$optimizationGoal=="A" & mydata$ecpmSlack>0.15 , na.rm=TRUE)
sum(mydata$optimizationGoal=="A" , na.rm=TRUE)
6426/22493
sum(mydata$optimizationGoal=="b" , na.rm=TRUE)
sum(mydata$optimizationGoal=="B" , na.rm=TRUE)
sum(mydata$optimizationGoal=="B" & mydata$ecpmSlack>0.15 , na.rm=TRUE)
1449/3744
?transmute
data %>% mutate(highSlack=ecpm_slack > 0.15)
library(dplyr)
data %>% mutate(highSlack=ecpm_slack > 0.15)
mydata %>% mutate(highSlack=ecpm_slack > 0.15)
mydata %>% mutate(highSlack=ecpmSlack > 0.15)
?group_by
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(optimizationGoal,highSlack) %>% summarise(count)
?summarise
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(optimizationGoal,highSlack) %>% summarise(count(optimizationGoal)
)
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),highSlack) %>% summarise(count(optimizationGoal))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(count(optimizationGoal))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(sum(1)))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(sum(1))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(count(1))
mydata %>% mutate(highSlack=ecpmSlack > 0.15) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
?geom_histogram
?between
mydata %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
mydata %>% filter(meaningfulImpressions & meaningfulFloorPrice & !is.na(optimizationGoal)) %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
library(dplyr)
mydata %>% filter(meaningfulImpressions & meaningfulFloorPrice & !is.na(optimizationGoal)) %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
mydata %>% filter(meaningfulImpressions & meaningfulFloorPrice & !is.na(optimizationGoal) & isOptimized==1) %>% mutate(highSlack=ecpmSlack > 0.30) %>% group_by(as.factor(optimizationGoal),as.factor(highSlack)) %>% summarise(n())
install.packages("Hmisc")
library(Hmisc)
?wtd.quantile
?quantile
seq(0.1,1)
seq(0.1,0.2,1)
seq(0.1,1,0.2)
?dplytr::quantile
?dplyr::quantile
?dplyr::summarize
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots()
plots(mydata)
View(mydata)
?quanitle
?quantile
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
mydata(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack))
mydata %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)
quantile(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack), probs=seq(0.1, 1, 0.1) )
names(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack))
head(as.vector(data2 %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)))
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
v<-mydata %>% filter(optimizationGoal=='A') %>% select(ecpmSlack)
class(v)
names(v)
nrow(v)
qunatile(v,0.5)
quantile(v,0.5)
quantile(v$ecpmSlack,0.5)
quantile(as.vector(v),0.5)
quantile(unlist(v),0.5)
quantile(v,0.5)
class(unlist(v))
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
?for
{}
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
rawDF<-readInput()
mydata <- extractFromChangeColumns(rawDF)
rawDF =
1
rawDF =
rawDF = 1
1
rawDF<-readInput()
mydata <- extractFromChangeColumns(rawDF)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plots(data)
plots(mydata)
nrow(mydata)
nrow(data2)
nrow(subset(data2, ecpmSlack >0.15))
nrow(subset(data2, goalType=="B", ecpmSlack >0.15))
nrow(subset(data2, goalType=="B"& ecpmSlack >0.15))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.15))
nrow(subset(data2, optimizationGoal=="B"))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.25))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.35))
nrow(subset(data2, optimizationGoal=="B"& ecpmSlack >0.3))
nrow(subset(data2, optimizationGoal=="A+"& ecpmSlack >0.3))
nrow(subset(data2, optimizationGoal=="A"& ecpmSlack >0.081))
3357/11187
g
source('C:/Shahar/Projects/MobileCheckup/session1.R')
ggplot(dfj1)+geom_boxplot(aes(x=floorPrice,y=MobileFill/DesktopFill)) + facet_grid(Network ~ PlacementId) + ylim(0,1)
ggplot(dfj1)+geom_boxplot(aes(x=1, y=MobileFill), color="blue", fill="blue",alpha=0.3) + geom_boxplot(aes(x=1, y=DesktopFill),color="red",fill="red",alpha=0.3) + facet_grid(Network ~ PlacementId)
ggplot(dfj1)+geom_boxplot(aes(x=floorPrice,y=MobileFill/DesktopFill)) + facet_grid(Network ~ PlacementId)
View(dfj1)
source('C:/Shahar/Projects/MobileCheckup/session1.R')
perpareForPlot <- function () {
source('C:/Shahar/Projects/MobileCheckup/session1.R')
}
ggplot(dfj1)+geom_boxplot(aes(x=floorPrice,y=MobileFill/DesktopFill)) + facet_grid(Network ~ PlacementId) + coord_cartesian(ylim = c(0, 2))
ggplot(dfj1)+geom_boxplot(aes(x=1,y=MobileFill/DesktopFill)) + facet_grid(Network ~ PlacementId) + coord_cartesian(ylim = c(0, 2))
?geom_boxplot
View(dfj)
ggplot(dfj)+geom_density(aex(x=globalImpressoin))
ggplot(dfj)+geom_density(aex(x=globalImpressions))
ggplot(dfj)+geom_density(aes(x=globalImpressions))
ggplot(dfj)+geom_density(aes(x=GlobalImpressions))
ggplot(dfj%>%filter(GlobalImpressions>100))+ geom_density(aes(x=GlobalImpressions))
ggplot(dfj%>%filter(GlobalImpressions>1000))+ geom_density(aes(x=GlobalImpressions))
ggplot(dfj%>%filter(GlobalImpressions>10000))+ geom_density(aes(x=GlobalImpressions))
ggplot(dfj%>%filter(GlobalImpressions>5000))+ geom_density(aes(x=GlobalImpressions))
ggplot(dfj%>%filter(GlobalImpressions>2000))+ geom_density(aes(x=GlobalImpressions))
log(2)
log(3)
exp(log(2))
log2(8)
2^3
dfj %>% group_by(2^floor(log2(GlobalImpressions))) %>% summarise(n())
32+20+48+28+13+21+22+12+18+2+12
?summarise
names(dfj)
source('C:/Shahar/Projects/MobileCheckup/session1.R')
dfj2 <- sumByDate(dfj)
source('C:/Shahar/Projects/MobileCheckup/session1.R')
dfj2 <- sumByDate(dfj)
source('C:/Shahar/Projects/MobileCheckup/session1.R')
dfj2 <- sumByDate(dfj)
View(dfj2)
source('C:/Shahar/Projects/MobileCheckup/session1.R')
dfj2 <- sumByDate(dfj)
dfj2 %>% group_by(Network) %>% summarise(sum(globalImpressions),sum(globalServed),sum(globalIncome),sum(experimentImpressions),sum(experimentServed),sum(experimentIncome))
print(dfj2 %>% group_by(Network) %>% summarise(sum(globalImpressions),sum(globalServed),sum(globalIncome),sum(experimentImpressions),sum(experimentServed),sum(experimentIncome)))
r1 <- dfj2 %>% group_by(Network) %>% summarise(sum(globalImpressions),sum(globalServed),sum(globalIncome),sum(experimentImpressions),sum(experimentServed),sum(experimentIncome))
View(r1)
r1 <- dfj2 %>% group_by(Network) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=gbserved/gbimps,sum(globalIncome),sum(experimentImpressions),sum(experimentServed),sum(experimentIncome))
View(r1)
r1 <- dfj2 %>% group_by(Network) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=gbserved/gbimps,sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=expserv/expimpssum(experimentIncome))
r1 <- dfj2 %>% group_by(Network) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=gbserved/gbimps,sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=expserv/expimps,sum(experimentIncome))
View(r1)
r2 <- dfj2 %>% group_by(Network,order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=gbserved/gbimps,sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=expserv/expimps,sum(experimentIncome))
r2 <- dfj2 %>% group_by(Network,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=gbserved/gbimps,sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=expserv/expimps,sum(experimentIncome))
View(r2)
?grepl
r2 <- dfj2 %>% filter(grepl("p=",GlobalChain)) %>% group_by(Network,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=gbserved/gbimps,sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=expserv/expimps,sum(experimentIncome))
r2 <- dfj2 %>% filter(grepl("p..?=",GlobalChain)) %>% group_by(Network,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=gbserved/gbimps,sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=expserv/expimps,sum(experimentIncome))
r2 <- dfj2 %>% filter(grepl("p\d\d?=",GlobalChain)) %>% group_by(Network,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=gbserved/gbimps,sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=expserv/expimps,sum(experimentIncome))
r2 <- dfj2 %>% filter(grepl("p[0-9]{1,2}=",GlobalChain)) %>% group_by(Network,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=gbserved/gbimps,sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=expserv/expimps,sum(experimentIncome))
View(r2)
r2 <- dfj2 %>% filter(grepl("p[0-9]{1,2}=",GlobalChain)) %>% group_by(GlobalChain,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=gbserved/gbimps,sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=expserv/expimps,sum(experimentIncome))
View(r2)
r2 <- dfj2 %>% filter(grepl("p[0-9]{1,2}=",GlobalChain)) %>% group_by(GlobalChain,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=100*gbserved/gbimps,sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=100*expserv/expimps,sum(experimentIncome))
View(r2)
?View
r2 <- dfj2 %>% filter(grepl("p[0-9]{1,2}=",GlobalChain)) %>% group_by(GlobalChain,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=round(100*gbserved/gbimps,1),sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=100*expserv/expimps,sum(experimentIncome))
View(r2)
r2 <- dfj2 %>% filter(grepl("p[0-9]{1,2}=",GlobalChain)) %>% group_by(GlobalChain,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=round(100*gbserved/gbimps,1),sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=100*expserv/expimps,sum(experimentIncome)) %>% arrange(gbfill-expfill)
View(r2)
r3 <- dfj2 %>% group_by(Network,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),gbfill=gbserved/gbimps,sum(globalIncome),expimps=sum(experimentImpressions),expserv=sum(experimentServed),expfill=expserv/expimps,sum(experimentIncome))
View(r3)
r3 <- dfj2 %>% group_by(Network,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),expimps=sum(experimentImpressions),expserv=sum(experimentServed),gbfill=gbserved/gbimps,expfill=expserv/expimps)
r4 <- dfj2 %>% filter(Network=="Pubmatic",Order==0) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),expimps=sum(experimentImpressions),expserv=sum(experimentServed),gbfill=gbserved/gbimps,expfill=expserv/expimps)
View(r4)
r4 <- dfj2 %>% filter(Network=="Pubmatic",Order==0) %>% group_by(PlacementId,GlobalType) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),expimps=sum(experimentImpressions),expserv=sum(experimentServed),gbfill=gbserved/gbimps,expfill=expserv/expimps)
write.csv(r4,"interim.csv")
getwd()
write.csv(dfj2,"dfj2.csv")
r3 <- dfj2 %>% group_by(Network,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),expimps=sum(experimentImpressions),expserv=sum(experimentServed),gbfill=mean(GlobalFill),expfill=mean(experimentFill))
r3 <- dfj2 %>% group_by(Network,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),expimps=sum(experimentImpressions),expserv=sum(experimentServed),gbfill=mean(globalFill),expfill=mean(experimentFill))
View(r3)
r3 <- dfj2 %>% group_by(Network,Order) %>% summarise(gbimps=sum(globalImpressions),gbserved=sum(globalServed),expimps=sum(experimentImpressions),expserv=sum(experimentServed),gbfill=mean(globalFill,na.rm=TRUE),expfill=mean(experimentFill,na.rm=TRUE))
View(r3)
ggplot(dfj2)+geom_point(aes(x=globalFill,y=experimentFill,color=Network)
)
ggplot(dfj2)+geom_point(aes(x=globalFill,y=experimentFill,color=Network))+xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalFill,y=experimentFill,color=Network)) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalFill,y=experimentFill,color=PlacementId)) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalFill,y=experimentFill,color=PlacementId, size=experimentServed)) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalFill,y=experimentFill,color=PlacementId, size=log(experimentServed))) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalFill,y=experimentFill,color=Ordinal, size=log(experimentServed))) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalFill,y=experimentFill,color=order, size=log(experimentServed))) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalFill,y=experimentFill,color=Order, size=log(experimentServed))) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalFill,y=experimentFill,color=as_factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalFill,y=experimentFill,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network)
ggplot(dfj2)+geom_point(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice), method="lm") + facet_wrap(~Network)
ggplot(dfj2)+geom_point(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice), method="lm") + facet_wrap(~Network) + xlim(0,7.5)+ylim(0,7.5)
ggplot(dfj2)+geom_point(aes(x=globalEcpm,y=experimentEcpm,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalEcpm,y=experimentEcpm), method="lm") + facet_wrap(~Network) + xlim(0,7.5)+ylim(0,7.5)
ggplot(dfj2)+geom_point(aes(x=globalRcpm,y=experimentRcpm,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalRcpm,y=experimentRcpm), method="lm") + facet_wrap(~Network) + xlim(0,7.5)+ylim(0,7.5)
ggplot(dfj2)+geom_point(aes(x=globalRcpm,y=experimentRcpm,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalRcpm,y=experimentRcpm), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalRcpm,y=experimentRcpm,color=as.factor(PlacementId), size=log(experimentServed))) + geom_smooth(aes(x=globalRcpm,y=experimentRcpm), method="lm") + facet_wrap(~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalRcpm,y=experimentRcpm,color=as.factor(PlacementId), size=log(experimentServed))) + geom_smooth(aes(x=globalRcpm,y=experimentRcpm), method="lm") + facet_wrap(order~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalRcpm,y=experimentRcpm,color=as.factor(PlacementId), size=log(experimentServed))) + geom_smooth(aes(x=globalRcpm,y=experimentRcpm), method="lm") + facet_wrap(Order~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalRcpm,y=experimentRcpm,color=as.factor(PlacementId), size=log(experimentServed))) + geom_smooth(aes(x=globalRcpm,y=experimentRcpm), method="lm") + facet(Order~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalRcpm,y=experimentRcpm,color=as.factor(PlacementId), size=log(experimentServed))) + geom_smooth(aes(x=globalRcpm,y=experimentRcpm), method="lm") + facet_grid(Order~Network) + xlim(0,1)+ylim(0,1)
ggplot(dfj2)+geom_point(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice), method="lm") + facet_wrap(~Network)
ggplot(dfj2)+geom_point(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice), method="lm") + facet_wrap(~Network) + coord_fixed()
ggplot(dfj2)+geom_point(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice), method="lm") + facet_wrap(~Network) + coord_fixed() + scale_y_continuous(breaks=0:10:2.5)
0:10:2.5
seq(0,10,2.4)
seq(0,10,2.5)
ggplot(dfj2)+geom_point(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice,color=as.factor(Order), size=log(experimentServed))) + geom_smooth(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice), method="lm") + facet_wrap(~Network) + coord_fixed() + scale_y_continuous(breaks=seq(0,10,2.5))
dfj3
dfj3 <- inner_join(dfj2,csv.read("formats.txt",sep="\t"))
dfj3 <- inner_join(dfj2,read.csv("formats.txt",sep="\t"))
dfj3 <- left_join(dfj2,read.csv("formats.txt",sep="\t"))
formats<-read.csv("formats.txt",sep="\t")
View(formats)
View(dfj3)
dfj3 <- left_join(formats,dfj2)
ggplot(dfj2)+geom_point(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice,color=as.factor(Format), size=log(experimentServed))) + geom_smooth(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice), method="lm") + facet_wrap(~Network) + coord_fixed() + scale_y_continuous(breaks=seq(0,10,2.5))
ggplot(dfj3)+geom_point(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice,color=as.factor(Format), size=log(experimentServed))) + geom_smooth(aes(x=globalEcpm/floorPrice,y=experimentEcpm/floorPrice), method="lm") + facet_wrap(~Network) + coord_fixed() + scale_y_continuous(breaks=seq(0,10,2.5))
ggplot(dfj3)+geom_point(aes(x=globalFill,y=experimentFill,color=as.factor(Format), size=log(experimentServed))) + geom_smooth(aes(x=globalFill,y=experimentFill), method="lm") + facet_wrap(~Network) + coord_fixed() + scale_y_continuous(breaks=seq(0,10,2.5))
r2
r3
r4
r5
r5 <- dfj2 %>% filter(globalServed>100 & experimentServed > 100) %>% transmute(Network,globalFill, experimentFill, fillRatio=experimentFill/globalFill)
r5 <- dfj2 %>% ungroup() %>% filter(globalServed>100 & experimentServed > 100) %>% transmute(Network,globalFill, experimentFill, fillRatio=experimentFill/globalFill)
View(r5)
ggplot(r5)+geom_density(aes(x=fillRatio, color=Network, fill=Network),alpha=0.5)
ggplot(r5)+geom_density(aes(x=log(fillRatio), color=Network, fill=Network),alpha=0.5)
r6 <- dfj2 %>% ungroup() %>% filter(globalServed>100 & experimentServed > 100) %>% transmute(format,globalFill, experimentFill, fillRatio=experimentFill/globalFill)
r6 <- dfj3 %>% ungroup() %>% filter(globalServed>100 & experimentServed > 100) %>% transmute(format,globalFill, experimentFill, fillRatio=experimentFill/globalFill)
r6 <- dfj3 %>% ungroup() %>% filter(globalServed>100 & experimentServed > 100) %>% transmute(Format,globalFill, experimentFill, fillRatio=experimentFill/globalFill)
ggplot(r6)+geom_density(aes(x=log(fillRatio), color=Network, fill=Network),alpha=0.5)
ggplot(r6)+geom_density(aes(x=log(fillRatio), color=Network, fill=Format),alpha=0.5)
ggplot(r6)+geom_density(aes(x=log(fillRatio), color=Format, fill=Format),alpha=0.5)
ggplot(r6)+geom_density(aes(x=log(fillRatio), color=Format, fill=Format),alpha=0.5) + facet_wrap(~Network)
r6 <- dfj3 %>% ungroup() %>% filter(globalServed>100 & experimentServed > 100) %>% transmute(Network, Format,globalFill, experimentFill, fillRatio=experimentFill/globalFill)
ggplot(r6)+geom_density(aes(x=log(fillRatio), color=Format, fill=Format),alpha=0.5) + facet_wrap(~Network)
source('C:/Shahar/Projects/MobileCheckup/session1.R')
analyzeFillByNetworkAndFormt(dfj)
source('C:/Shahar/Projects/MobileCheckup/session1.R')
a=analyzeFillByNetworkAndFormt(dfj)
print(a[[1]])
print(a[[2]])
source('C:/Shahar/Projects/MobileCheckup/session1.R')
