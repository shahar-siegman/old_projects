j <- predictionSpreadsheet(rawDF, extDisc, extDisc)
inner_join(placementSample %>% select(placementId)).
inner_join(placementSample %>% select(placementId))
period2 %>% inner_join(placementSample %>% select(placementId))
!identical(externalDiscrepancyData,NA)
"placementId" %in% names(externalDiscrepancyData)
pred %>% left_join(externalDiscrepancyData, by=placementId)
pred %>% left_join(externalDiscrepancyData, by="placementId")
debugSource('C:/Shahar/Projects/Discrepancy/R/session7.R')
j <- predictionSpreadsheet(rawDF, extDisc, extDisc)
View(j)
debugSource('C:/Shahar/Projects/Discrepancy/R/session7.R')
source('C:/Shahar/Projects/Discrepancy/R/session7.R')
j <- predictionSpreadsheet(rawDF, extDisc, extDisc)
View(j)
class(c("a","b","c"))
class(list("a","b","c"))
class(list("a","b","c")[1])
class(list("a","b","c")[[1])
class(list("a","b","c")[[1]])
list("a","b","c")[1]
list("a","b","c")
source('C:/Shahar/Projects/Discrepancy/R/session7.R')
mpred <- analyzePredictionSpreadsheet(pred)
mpred <- analyzePredictionSpreadsheet(j)
p<-plotResiduals(mpred)
print(p)
source('C:/Shahar/Projects/Discrepancy/R/session7.R')
source('C:/Shahar/Projects/Discrepancy/R/session5data.R')
source('C:/Shahar/Projects/Discrepancy/R/session7.R')
source('C:/Shahar/Projects/Discrepancy/R/session6.R')
mainAnalysisFlow()
source('C:/Shahar/Projects/Discrepancy/R/session7.R')
mainAnalysisFlow()
p <- .Last.value
View(p)
p
q <- mainAnalysisFlow()
View(q)
names(q)
View(q)
a=testDByPercentileByLength2
View(a)
class(a)
a=testDByPercentileByLength2()
library(dplyr)
a=testDByPercentileByLength2()
View(a)
t <- fitAlongPercentiles(fitAlongChainLength(a))
t
source('C:/Shahar/Projects/Discrepancy/R/session6.R')
b <- testDByPercentileByLength2();
b
View(b)
lm(1:5 ~ V1, b)
lm(1:5 ~ V1, data.frame(b)
)
b1 <- data.frame(b)
b1
lm(1:5 ~ b, data.frame(b)
)
lm(b ~ 1:5 , data.frame(b))
?lm
b<-data.frame(b)
b["x"]=1:5
b
lm(b ~ x , b)
period1
period1 <- getSamplePlacementData(rawDF)
library(dyplr)
library(dplyr)
period1 <- getSamplePlacementData(rawDF)
View(pperiod1)
View(period1)
source('C:/Shahar/Projects/Discrepancy/R/session6.R')
d <- testDByPercentileByLength2()
View(d)
b <- fitAlongChainLength(d)
View(b)
t <- fitAlongPercentiles(b)
ptiles
coefficients(fitIntercept)
log(d2$intercept)
source('C:/Shahar/Projects/Discrepancy/R/session6.R')
q
?read.csv
a={1,2,3}
a=[1,2,3]
a <- [1,2,3]
a <- c(1,2,3)
a
a <- c(c(1,4,5),c(2,6,3),c(3,6,7))
a
a <- list(c(1,4,5),c(2,6,3),c(3,6,7))
a
lapply(a,function(x) {x[1]})
lapply(a,function(x) {x[2]})
x <- scan("C:\Shahar\Projects\IndexSSP\data.txt", what="", sep="\n")
x <- scan("C:\\Shahar\\Projects\\IndexSSP\\data.txt", what="", sep="\n")
x
y <- strsplit(x, ",")
y
as.numeric("4")
lappply(y,as.numeric())
lapply(y,as.numeric)
z<-lapply(y,as.numeric)
z
z[[1]]
z[[1]][2]
z[[1]][4]
z
lapply(z,`[[`,1)
lapply(z,`[`,-11)
lapply(z,`[`,-1)
lapply(z,sort)
unlist(lapply(z,sort))
unique(unlist(lapply(z,sort)))
unique(unlist(z))
sort(unique(unlist(z)))
?sort
lapply(y,sort,FALSE)
lapply(z,sort,FALSE)
?lapply
lapply(z,sort,TRUE)
?matrix
"A"+c(4,5)
paste("A",c(4,5))
paste("A",paste(c(4,5)))
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
getwd()
source('C:/Shahar/Projects/IndexSSP/session1.R')
getwd()
setwd("C:/Shahar/Projects/IndexSSP")
loopFiles()
a<- list(NA,c("A","B"))
a
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
rep("a",5)
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
loopResults()
?grid.arrange
??grid.arrange
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
auctions <- list(firsts,seconds,nAuctions,trueFloorPrices)
resultByFloorPrice(auctions,0.1)
resultByFloorPrice(auctions,auctions[[4]])
trueFloorPrices <- trueFloorPrices[!recordsToRemove]
trueFloorPrices <- as.numeric(trueFloorPrices)
resultByFloorPrice(auctions,trueFloorPrices)
a=1:10
T
b=c(T,T,T,F,F,F,F)
a=1:7
a*B
a*
b
a*b
sum(a*b)
?attributes
a <- data.frame()
attributes(a) <- list(hello=5, dumb="abty")
a
a$x=1:10
a
mostattributes(a) <- list(hello=5, dumb="abty")
?data.frame
attributes(a)
attributes(a)$hello
a$hello
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
loopResults()
ggplot()+geom_line(data=df, aes(y=wins, x=floorPrice))+geom_point(data=df, aes(y=wins, x=floorPrice))
print ggplot()+geom_line(data=df, aes(y=wins, x=floorPrice))+geom_point(data=df, aes(y=wins, x=floorPrice))
print(ggplot()+geom_line(data=df, aes(y=wins, x=floorPrice))+geom_point(data=df, aes(y=wins, x=floorPrice)))
ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
p1<-ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
print(p1)
df
dev.off()
ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
plot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
plot(data=df, aes(y=wins, x=floorPrice))
plot(df$wins,df$revenue)
print(plot(df$wins,df$revenue))
b
ggplot2(data=b)+geo_point()
ggplot(data=b)+geo_point()
ggplot(data=as.data.frame(b) )+geo_point()
ggplot(data=as.data.frame(b) )+geom_point()
c=as.data.frame(b)
ggplot(data=c )+geom_point()
c
ggplot(data=p )+geom_point()
ggplot(data=p )+geom_point(aes(x=chainLength,y=linearPred))
ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
p <- ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
print(p)
p <- ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
library(ggplot2)
p <- ggplot(data=p )+geom_point(aes(x=ChainLength,y=linearPred))
p <- ggplot(data=q )+geom_point(aes(x=ChainLength,y=linearPred))
print(p)
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
tail(df)
mean(auctions[[4]])
head(df)
df[15,]
df[60,]
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
tail(df)
loopFiles()
class(df)
loopFiles()
class(df)
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
class(df)
class(y)
nrow(y)
loopResults
loopResults()
class(df)
ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
p1
p1<-NA
p1<-ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
loopResults()
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice))+geom_line()+geom_point()
class(p1)
loopFiles()
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopFiles()
loopResults()
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice, colors=floorPrice))+geom_line()+geom_point()
print(p1)
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice, fill=floorPriceType))+geom_line()+geom_point()
print(p1)
p1 <- ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))+geom_line()+geom_point()
print(p1)
debugSource('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
fname="results/8aa7fb4e378bd004fcdbb00e918a5e16.csv"
df <- read.csv(fname)
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))+geom_line()f+geom_point()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType))+geom_line()+geom_point()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,2))
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,1))
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,0.5))
loopResults()
ggplot(data=df, aes(y=wins, x=floorPrice, colour=floorPriceType,size=floorPriceType))+geom_line()+geom_point()+ scale_size_manual(values=c(4,0.5))
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
print(p1)
print(p2)
source('C:/Shahar/Projects/IndexSSP/session1.R')
loopResults()
getwd()
setwd("C:/Shahar/Projects/Discrepancy")
getwd()
install.packages("gdata")
?Read.xls
?read.xls
iinstall.packages(xlconnect)
install.packages(xlconnect)
install.packages("xlconnect")
install.packages("XLConnect")
?readWorksheet
?read.Worksheet
readWorksheet
readWorksheet(a)
xlobj <- loadWorkbook("C:\Shahar\Projects\Discrepancy\compare util results.xlsx",FALSE)
xlobj <- loadWorkbook("C:/Shahar/Projects/Discrepancy/compare util results.xlsx",FALSE)
library(XLConnect)
xlobj <- loadWorkbook("C:/Shahar/Projects/Discrepancy/compare util results.xlsx",FALSE)
source('C:/Shahar/Projects/Discrepancy/checkFillPrediction.R')
checkFillPrediction
beforeDf
library(dplyr)
?select
source('C:/Shahar/Projects/Discrepancy/checkFillPrediction.R')
ggplot(data=togetherDf,aes(x=err,color=code.version))+geom_density()
source('C:/Shahar/Projects/Discrepancy/checkFillPrediction.R')
ggplot(data=togetherDf,aes(x=err,color=code.version))+geom_density()
summary(beforeDf)
beforeDf$err <- beforeDf$Predicted - beforeDf$Actual
afterDf$err <- afterDf$Predicted - afterDf$Actual
afterDf$Predicted <- as.numeric(afterDf$Predicted)
afterDf$err <- afterDf$Predicted - afterDf$Actual
summary(beforeDf$err)
summary(afterDf$err)
?summary
summary(together$err[together$code.version=="before"])
summary(togetherDf$err[togetherDf$code.version=="before"])
summary(togetherDf$err[togetherDf$code.version=="after"])
??percentile
quantile(togetherDf$err[togetherDf$code.version=="before"], c(0.1, 0.9))
quantile(togetherDf$err[togetherDf$code.version=="after"], c(0.1, 0.9))
quantile(togetherDf$err[togetherDf$code.version=="after"], c(0.1, 0.9), na.rm=TRUE)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
with(rawDF)
?as.Date
d1=as.Date("2015-06-27")
d2=as.Date("2015-07-04")
d1
d2
d2-d1
i<-d2-d1
i
class(i)
as.numeric(i)
library(dplyr)
c(d1,d2)-d1
c(d1,d2)-d1 %>% as.numeric()
as.numeric(c(d1,d2)-d1 )
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
main()
date
main()
View(rawDF)
rawDF<-read.csv("C:/Shahar/Projects/eCpmTooHigh/performance_with_fp.out.csv", sep=";")
View(rawDF)
head(as.Date(rawDF$performance_date,"yyyy-mm-dd"))
head(as.Date(rawDF$performance_date,format="yyyy-mm-dd"))
head(rawDF$performance_date)
class(rawDF$performance_date)
?read.csv
rawDF<-read.csv("C:/Shahar/Projects/eCpmTooHigh/performance_with_fp.out.csv", sep=";", as.is="performance_date")
class(rawDF$performance_date)
head(as.Date(rawDF$performance_date,format="yyyy-mm-dd"))
head(rawDF$performance_date)
head(as.Date(rawDF$performance_date,format="yyyy-mm-dd"))
head(as.Date(rawDF$performance_date))
class(as.Date(rawDF$performance_date))
rawDF<-read.csv("C:/Shahar/Projects/eCpmTooHigh/performance_with_fp.out.csv", sep=";")
class(as.Date(rawDF$performance_date))
head(as.Date(rawDF$performance_date))
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
main()
date
ChangeDates
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
main()
rawDF<-read.table("C:/Shahar/Projects/eCpmTooHigh/performance_with_fp.out.csv", sep=";")
class(rawDF)
names(rawDF)
View(rawDF)
rawDF<-read.table("C:/Shahar/Projects/eCpmTooHigh/performance_with_fp.out.csv", sep=";", header=TRUE)
View(rawDF)
sapply(rawDF,class)
rawDF<-read.csv("C:/Shahar/Projects/eCpmTooHigh/performance_with_fp.out.csv", sep=";", as.is=TRUE)
sapply(rawDF,class)
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
main()
head(ChangeDates)
ChangeDates
strsplit(ChangeDates, ",")
strsplit(ChangeDates, ",") %>% as.Date()
as.Date(strsplit(ChangeDates, ",") )
strsplit(ChangeDates, ",")
a<-strsplit(ChangeDates, ",")
as.Date(a)
as.Date(a,"yyyy-mm-dd")
class(a)
lapply(a,as.Date)
unlist(lapply(a,as.Date))
lapply(a,as.Date)
sapply(a,as.Date)
b<-lapply(a,as.Date)
b
date
b-date
b[[1]]-date
?strsplit
a<-strsplit(ChangeDates, ",")
a<-strsplit(ChangeDates, ",") [[1]]
a
class(a)
changeDateVec <- as.Date(strsplit(ChangeDates, ",")[[1]])
changeDateVec
debugSource('C:/Shahar/Projects/eCpmTooHigh/session1.R')
main()
changeDateVec
date
diffDays
floorPriceList
interval
changeDateVec
date
interval
changeDateVec
date
interval
date
diffDays
floorPriceVec
floorPriceVec[interval]
?geom_density
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
data=addFloorPriceColumn(rawDF)
rawDF <- readInput()
data=addFloorPriceColumn(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
data=addFloorPriceColumn(rawDF)
View(rawDF)
findInterval(0,3)
a
a[0]
max(2,4)
max(2,4,5,6,7)
max(2,4,9,6,7)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
data=addFloorPriceColumn(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
data=addFloorPriceColumn(rawDF)
View(data)
rawDF<-readInput()
data=addFloorPriceColumn(rawDF)
View(data)
findInterval(3,0)
findInterval(0,3)
plotRatioDensity(data)
plotRatioDensity(data)+xlim(0,3)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plotRatioDensity(data)+xlim(0,3)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plotRatioDensity(data)+xlim(0,3)
?geom_density
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plotRatioDensity(data)+xlim(0,3)
plotRatioDensity(data)+xlim(0,5)
a=c(1,2,4,3,3,3,3,4)
which(a==3)
sum(a==3)
sum(a==1)
sum(a==2)
sum(a==90)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
data=addFloorPriceColumn(rawDF)
mydata <- data
sum(mydata$floorPrice<0)
sum(mydata$floorPrice>0)
head(mydata[floorPrice<0,])
head(mydata[mydata$floorPrice<0,])
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plotRatioDensity(mydata)
plotRatioDensity(mydata)+xlim(0,4)
View(data)
?select
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
sum(mydata$ecpm*mydata$impressions*mydata$fill)
sum(mydata$ecpm*mydata$impressions*mydata$fill/1000)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
rawDF <- readInput()
mydata <- addFloorPriceColumn(rawDF)
View(mydata)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- addFloorPriceColumn(rawDF)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
mydata <- addFloorPriceColumn(rawDF)
View(mydata)
plotRatioDensity(mydata)
plotRatioDensity(mydata)+xlim(0,4)
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
plotRatioDensity(mydata)+xlim(0,4)
ggplot()+geom_hist(data=data,aes(x=ecpmRatio,weight=cost/sum(cost)))
?geom_density
ggplot()+geom_histogram(data=data,aes(x=ecpmRatio,weight=cost/sum(cost)))
ggplot()+geom_histogram(data=mydata,aes(x=ecpmRatio,weight=cost/sum(cost)))
ggplot()+geom_histogram(data=mydata,aes(x=ecpmRatio,weight=cost/sum(cost)))+xlim(0,4)
ggplot()+geom_histogram(data=mydata,aes(x=ecpmRatio,weight=cost/sum(cost)),binwidth=0.05)+xlim(0,4)
ggplot()+geom_histogram(data=mydata,aes(x=ecpmRatio,weight=cost/sum(cost)),binwidth=0.05)+xlim(0,4)+ylim(0,0.1)
ggplot()+stat_ecdf(data=mydata,aes(x=ecpmRatio,weight=cost/sum(cost)),binwidth=0.05)+xlim(0,4)+ylim(0,0.1)
ggplot()+stat_ecdf(data=mydata,aes(x=ecpmRatio,weight=cost/sum(cost)),binwidth=0.05)+xlim(0,4)
ggplot()+stat_ecdf(data=mydata,aes(x=ecpmRatio,weight=cost,binwidth=0.05)+xlim(0,4)
)
ggplot()+stat_ecdf(data=mydata,aes(x=ecpmRatio,weight=cost,binwidth=0.05))+xlim(0,4)
ggplot()+stat_ecdf(data=mydata,aes(x=ecpmRatio,weight=cost,binwidth=0.05))
ggplot()+stat_ecdf(data=mydata,aes(x=ecpmRatio,weight=cost,binwidth=0.05))+xlim(0,4)
sum(is.na(mydata$cost))
sum(is.na(mydata$ecpmRatio))
sum(mydata$ecpmRatio<0)
data<-mydata
mydata <- mydata[mydata$floorPrice>0,]
sum(mydata$ecpmRatio<0)
ggplot()+stat_ecdf(data=mydata,aes(x=ecpmRatio,weight=cost,binwidth=0.05))+xlim(0,4)
sum(is.infinite(mydata@ecpmRatio)
)
sum(is.infinite(mydata$ecpmRatio)
)
sum(is.infinite(mydata$ecpmRatio))
sum(is.infinite(mydata$cost))
sum(missing(mydata$cost))
NA <0
if(NA)
1
source('C:/Shahar/Projects/eCpmTooHigh/session1.R')
